(self.modernJsonp=self.modernJsonp||[]).push([["25656"],{757625(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardPickerList_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],type:"Pin",abstractKey:null};n.hash="76b22cc5d658befe1dc27454d3aee77f";let a=n},486843(e,t,i){var n;i.r(t),i.d(t,{default:()=>r});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardTitleSuggestionList_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:n,storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};a.hash="69ffcdea57a7778d2ebbcd41c276c0d0";let r=a},368213(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupRepinPage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null}],type:"Pin",abstractKey:null};n.hash="60ba8f292ef82335c3d4cbce50f362d8";let a=n},304209(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileRepinCreateScreen_pin",selections:[{args:null,kind:"FragmentSpread",name:"RepinAddSection_pin"}],type:"Pin",abstractKey:null};n.hash="2d5f10a7f4e54a8cf9118f134bcd7386";let a=n},87903(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileRepinPicker_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"RepinBoardPicker_pin"},{args:null,kind:"FragmentSpread",name:"RepinSectionPicker_pin"},{args:null,kind:"FragmentSpread",name:"RepinCreateBoardButton_pin"}],type:"Pin",abstractKey:null};n.hash="fbb4180ea3919f31ccfbb4bf4b2d25ea";let a=n},953349(e,t,i){var n;i.r(t),i.d(t,{default:()=>r});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinAddSection_pin",selections:[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};a.hash="b3ec14d29962e56f80dd52e7e6d7a6d9";let r=a},946007(e,t,i){var n;i.r(t),i.d(t,{default:()=>r});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinBoardPicker_pin",selections:[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[n],storageKey:null},{args:null,kind:"FragmentSpread",name:"BoardPickerList_pin"},{args:null,kind:"FragmentSpread",name:"BoardTitleSuggestionList_pin"},{args:null,kind:"FragmentSpread",name:"useClientTrackingParams_pin"}],type:"Pin",abstractKey:null};a.hash="475036dcb56a51d3552313200b8c9d45";let r=a},249605(e,t,i){var n;i.r(t),i.d(t,{default:()=>r});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinCreateBoardButton_pin",selections:[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[n],storageKey:null}],type:"Pin",abstractKey:null};a.hash="1612c2df94f42990b3d4f6ccede72a70";let r=a},370864(e,t,i){var n,a,r,o,l,s,d;i.r(t),i.d(t,{default:()=>u});let c=(n=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],a=[{kind:"Variable",name:"pin",variableName:"pinId"}],o={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d=[r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"RepinPageQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"RepinPage_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"RepinPageQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},o,{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s,o,l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},s],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:d,storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:d,storageKey:null}],storageKey:null},s],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"c2dfef88dd2d19e87739d4a01cad7d8a4598189c33dbda3a2859c0731bd12bea",metadata:{},name:"RepinPageQuery",operationKind:"query",text:null}});c.hash="76093586a269ca0330e25a57bd33f665";let u=c},265520(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinPage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"MobileRepinPicker_pin"},{args:null,kind:"FragmentSpread",name:"MobileRepinCreateScreen_pin"}],type:"Pin",abstractKey:null};n.hash="334d0ce72c30565b62e52dd00bf86623";let a=n},430592(e,t,i){var n;i.r(t),i.d(t,{default:()=>r});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinSectionPicker_pin",selections:[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[n],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],type:"Pin",abstractKey:null};a.hash="f0b2fbadfba92480a2077999a000a308";let r=a},793889(e,t,i){var n,a,r,o,l;i.r(t),i.d(t,{default:()=>d});let s={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"useFetchBoardTitleSuggestionsQuery",selections:[{alias:null,args:a=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[o={alias:null,args:null,concreteType:"BoardTitleSuggestions",kind:"LinkedField",name:"boardTitleSuggestions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null},l={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"useFetchBoardTitleSuggestionsQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null},l],storageKey:null}]},params:{id:"dfccee15ebd4af4563083cc11670f30e6390ba0f2d1317da3d908269f01eadba",metadata:{},name:"useFetchBoardTitleSuggestionsQuery",operationKind:"query",text:null}};s.hash="a8967078f1de7ce3a263a224d0d0e710";let d=s},769178(e,t,i){i.d(t,{VG:()=>a,XC:()=>o,Z9:()=>r,a0:()=>n});let n=e=>"ios"===e&&(window.devicePixelRatio||1)*window.screen.height==2436,a=28,r=e=>window.innerHeight>=748&&n(e),o=()=>"undefined"!=typeof window&&!!window.navigator&&(/iPad/.test(navigator.platform)||"MacIntel"===navigator.platform&&"ontouchend"in document&&Math.min(window.screen.width,window.screen.height)>=700)},467040(e,t,i){i.d(t,{A:()=>h});var n=i(97407),a=i(296540),r=i(328138),o=i(196866),l=i(28245),s=i(141716),d=i(376159),c=i(534955),u=i(815106),p=i(474848);function h({children:e,footerConfig:t,headerConfig:i,height:h,hideOnScroll:_,hideOnScrollState:{isHidden:g,updateHiddenState:m},isFooterHidden:f,noPadding:y,paddingX:b,paddingY:x=d.En,type:P,zIndex:v,isStoryPin:A}){let w,S;(0,a.useEffect)(()=>{(0,n.A)("FixedContent","/app/packages/layout/FixedContent.tsx")},[]);let{headerLimitedOverflow:k,ignoreObstructions:j,zIndexForGestaltBug:I}=i||{},{appUpsellFooterConfig:z,footerInLego:T,navFooterConfig:R}=t||{},B=!!z,F="header"===P?"top":"bottom",C=(0,l.D2)(),{isRTL:E}=(0,c._8)(),{mWebCloseupRedesignEnabled:L}=(0,o.A)(),K=(0,a.useRef)(null),O=(0,a.useRef)(null);(0,a.useEffect)(()=>{try{if(!j){let e=K.current;O.current=k&&e&&Array.isArray(e.children)?e.children[0]:e,O.current instanceof HTMLElement&&s.A.addObstruction(F,O.current)}}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}return()=>{!j&&O.current instanceof HTMLElement&&s.A.removeObstruction(F,O.current)}},[j,k,F,C]);let M="top"===F?"relative":"fixed",D=y?0:x,N=(h??d.ui)+(i?.overrideTop||0),H=_||R?{transition:T||L?"transform 300ms ease-in-out, opacity 300ms ease-in-out":"transform 200ms linear",...g||f?{transform:`translateY(${"top"===F?-N:N}px)`,opacity:T||L?0:1}:Object.freeze({})}:{},$=2*!("relative"!==M||i?.noGutter),Y=$?-$:0,G=C?l.ee:"rgba(255,255,255,.95)";C&&("header"===P?w=-1:S=-1);let W=T?B?void 0:h??d.ui:"100%",V=T?d.jD:void 0,J=i?.isTranslucent&&G||C?G:"var(--sema-color-background-default)",U=i?.isTransparentBackground&&1?"var(--sema-color-background-transparent)":J,Q=(0,a.useMemo)(()=>({height:"footer"===P&&L?`calc(${W} + env(safe-area-inset-bottom))`:W,...L&&"footer"===P?{paddingBottom:`calc(env(safe-area-inset-bottom) + ${4*(D||0)}px)`}:Object.freeze({})}),[L,W,P,D]),q=(0,u.A)({skipExpActivation:!0});return(0,p.jsx)(r.az,{ref:K,bottom:"footer"===P,dangerouslySetInlineStyle:{__style:{top:w,bottomStyle:S,...!v||I?{zIndex:I||1}:Object.freeze({}),...k?{background:"transparent",overflow:"hidden",paddingBottom:d.RN,marginBottom:-d.RN,pointerEvents:"none"}:Object.freeze({}),...i?.hasBorder?{borderBottom:d.th}:Object.freeze({}),...t?.hasTopShadow?{boxShadow:"0 -2px 4px 1px rgba(0, 0, 0, 0.08)"}:Object.freeze({}),...H}},"data-test-id":P,display:B?"flex":void 0,height:h&&!T?h:void 0,left:!0,marginEnd:T?"auto":Y,marginStart:T?"auto":Y,onTransitionEnd:()=>{(_||R)&&O.current&&(g||f?s.A.removeObstruction(F,O.current):s.A.addObstruction(F,O.current))},position:M,right:!0,top:"header"===P,width:T||"fixed"!==M?void 0:"100%",zIndex:I?void 0:v,children:(0,p.jsx)(r.az,{alignItems:t?.alignCenter?"center":void 0,dangerouslySetInlineStyle:{__style:{backgroundColor:U,paddingLeft:E||!q||A?void 0:"8px",paddingRight:E&&q&&!A?"8px":void 0,...Q,boxShadow:L&&"footer"===P?`0 10px 0 0 ${U}, ${d.jD}`:V,marginBottom:T&&!R?.docked?16:void 0,...k?{pointerEvents:"auto"}:Object.freeze({}),...i?.useRoundedCorners?{zIndex:5,borderTopRightRadius:17,borderTopLeftRadius:17,borderBottomRightRadius:0,borderBottomLeftRadius:0}:Object.freeze({})}},display:T||t?.alignCenter?"flex":void 0,marginEnd:T?"auto":void 0,marginStart:T?"auto":void 0,paddingX:b||4*("footer"===P&&!y)+$,paddingY:D,position:"relative",rounding:T&&!R?.docked?"pill":void 0,width:R?R.footerWidth:B?void 0:"100%",children:"function"==typeof e?e({updateHiddenState:m}):e})})}},301914(e,t,i){i.d(t,{A:()=>s});var n=i(97407),a=i(296540),r=i(467040),o=i(229813),l=i(474848);function s({alignCenter:e,appUpsellFooterConfig:t,footerInLego:i,hasTopShadow:s,navFooterConfig:d,...c}){return(0,a.useEffect)(()=>{(0,n.A)("FixedFooter","/app/packages/layout/FixedFooter.tsx")},[]),(0,l.jsx)(o.A,{appUpsellFooterConfig:t,hideOnScroll:c.hideOnScroll,navFooterConfig:d?.scrollConfig,children:n=>(0,l.jsx)(r.A,{...c,footerConfig:{alignCenter:e,appUpsellFooterConfig:t,footerInLego:i,hasTopShadow:s,navFooterConfig:d},hideOnScrollState:n,type:"footer"})})}},909616(e,t,i){i.r(t),i.d(t,{default:()=>c});var n=i(97407),a=i(296540),r=i(328138),o=i(376159),l=i(467040),s=i(229813),d=i(474848);function c({hasBorder:e,headerLimitedOverflow:t,ignoreObstructions:i,isTranslucent:c,isTransparentBackground:u,noGutter:p,overrideTop:h,useRoundedCorners:_,zIndexForGestaltBug:g,isStoryPin:m,...f}){(0,a.useEffect)(()=>{(0,n.A)("FixedHeader","/app/packages/layout/FixedHeader.tsx")},[]);let{noPadding:y,paddingY:b=o.En,zIndex:x}=f;return(0,d.jsx)(r.ib,{height:t?o.wz+2*(y?0:b)*4:void 0,top:h||0,zIndex:x||void 0,children:(0,d.jsx)(s.A,{hideOnScroll:f.hideOnScroll,children:n=>(0,d.jsx)(l.A,{...f,headerConfig:{isTranslucent:c,isTransparentBackground:u,headerLimitedOverflow:t,hasBorder:e,ignoreObstructions:i,noGutter:p,overrideTop:h,zIndexForGestaltBug:g,useRoundedCorners:_},hideOnScrollState:n,isStoryPin:m,type:"header"})})})}},229813(e,t,i){i.d(t,{A:()=>o});var n=i(296540),a=i(991402);function r(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class o extends n.Component{constructor(...e){super(...e),r(this,"state",{isHidden:!!this.props.appUpsellFooterConfig||!!this.props.navFooterConfig?.isDockedNavOnPlp}),r(this,"lastScrollPos",0),r(this,"updateHiddenState",e=>{this.reqAnimationId=window.requestAnimationFrame(()=>{this.setState({isHidden:e})})}),r(this,"handleScroll",(0,a.A)(()=>{let{appUpsellFooterConfig:e,navFooterConfig:t}=this.props,{isHidden:i}=this.state,n=window.scrollY,a=n-this.lastScrollPos,r="none",{scrollHeight:o,clientHeight:l}=document.documentElement||{};Number.isNaN(o)||Number.isNaN(l)||(r=a<0?n<=Math.abs((window.scrollMinY||0)+Math.max(a,20))?"start":"none":n>=(window.scrollMaxY||o-l)-Math.max(a,20)?"end":"none");let s=55*!t?.isModal;e?a>20&&i&&n>=500?e.shouldShowAfterScroll()&&(this.updateHiddenState(!1),t?.onScroll(!1)):(a<-20&&!i||n<=s)&&(this.updateHiddenState(!0),t?.onScroll(!0)):this.props.navFooterConfig?.isDockedNavOnPlp?"start"===r&&!i||n<=s?(this.updateHiddenState(!0),t?.onScroll(!0)):(n>s||"end"===r)&&i&&(this.updateHiddenState(!1),t?.onScroll(!1)):(a<-20||"start"===r)&&i||n<=s?(this.updateHiddenState(!1),t?.onScroll(!1)):(a>20||"end"===r)&&!i&&(this.updateHiddenState(!0),t?.onScroll(!0)),this.lastScrollPos=n},30))}componentDidMount(){try{(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.addEventListener("scroll",this.handleScroll)}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}}componentWillUnmount(){(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.removeEventListener("scroll",this.handleScroll),this.reqAnimationId&&(window.cancelAnimationFrame(this.reqAnimationId),this.reqAnimationId=null)}componentDidUpdate(e){!e.hideOnScroll&&this.props.hideOnScroll||!e.navFooterConfig?.isDockedNavOnPlp&&this.props.navFooterConfig?.isDockedNavOnPlp?(this.updateHiddenState(!0),window.addEventListener("scroll",this.handleScroll)):(e.hideOnScroll&&!this.props.hideOnScroll||e.navFooterConfig?.isDockedNavOnPlp&&!this.props.navFooterConfig?.isDockedNavOnPlp)&&(this.updateHiddenState(!1),window.removeEventListener("scroll",this.handleScroll))}render(){let{children:e,navFooterConfig:t}=this.props,{isHidden:i}=this.state;return e({isHidden:!t?.forceShow&&i,updateHiddenState:this.updateHiddenState})}}},605257(e,t,i){i.r(t),i.d(t,{default:()=>u});var n=i(97407),a=i(296540),r=i(328138),o=i(998345),l=i(769178),s=i(961736),d=i(534955),c=i(474848);let u=({children:e,dataLayoutShiftBoundaryId:t,hasFixedHeader:i=!1,hasGutter:u=!0,height:p,showKeychainError:h=!1,useViewport:_=!1})=>{(0,a.useEffect)(()=>{(0,n.A)("MobilePageContainer","/app/packages/layout/MobilePageContainer.tsx")},[]);let g=(0,d._8)(),m=(0,l.Z9)(g.userAgent.platform)?l.VG:0;return(0,c.jsx)(r.az,{"data-layout-shift-boundary-id":t||"PageContainer",height:_?`calc(100vh - ${m}px)`:p,paddingX:u?o.MZ:void 0,paddingY:i||h?void 0:3,children:(0,c.jsx)(s.k,{value:!!u,children:e})})}},376159(e,t,i){i.d(t,{En:()=>a,RN:()=>r,jD:()=>l,th:()=>s,ui:()=>n,wz:()=>o});let n=64,a=3,r=100,o=44,l="0px 0px 8px rgba(0, 0, 0, 0.1)",s="1px solid #efefef"},905668(e,t,i){i.d(t,{Ay:()=>c,B4:()=>u,FU:()=>p,Fr:()=>r,MQ:()=>d,it:()=>_,oW:()=>h});var n=i(193574),a=i(650698);let r=(e,t)=>e.length===t.length&&e.every((e,i)=>(0,a.A)(e,t[i])),o=(e,t)=>e.length===t.length&&e.every((e,i)=>e===t[i]),l=e=>e;function s(e,t=o,i=l){return function(n){let a=[];return function(...r){let o=a.find(e=>t(e.args,i(r)));if(o)return o.result;let l=n(...r);return a.push({args:i(r),result:l}),e&&a.length>e&&a.shift(),l}}}function d(e,t=o,i=l){let n=[];return{memoize:function(a){return function(...r){let o=i(r),l=n.find(e=>t(e.args,o));if(l)return l.result;let s=a(...r);return n.push({args:o,result:s}),e&&n.length>e&&n.shift(),s}},clearCache:function(){n=[]}}}let c=s(),u=s(1),p=s(void 0,o,e=>[JSON.stringify(e)]),h=s(0,r),_=s(0,(e,t)=>e.length===t.length&&e.every((e,i)=>(0,n.Ay)(e,t[i])))},685226(e,t,i){i.d(t,{Kx:()=>s,MV:()=>l,Ry:()=>r,YV:()=>o,dp:()=>a,gT:()=>d,xt:()=>n});let n="pin-builder-font-faces",a="system-font-faces",r="pin-builder-education-font-faces",o="licensed",l="system",s="brand",d=4},864310(e,t,i){i.d(t,{A:()=>n});let n=e=>{let t={};e.forEach(({label:e,timestamp:i})=>{t={...t,[e]:(t[e]||[]).concat([i])}});let i=Object.freeze({});return Object.keys(t).forEach(e=>{(t[e]||[]).forEach((t,n)=>{let a=n?`${e}_${n+1}`:e;i={...i,[a]:t}})}),i}},879994(e,t,i){function n(e,t){let i;if(e.error){let{httpStatus:n,api_error_code:a,redirectUrl:r}=e.error;(404===n||401===n&&7===a)&&(i={pathname:t?"/ideas/":"/",state:{showError:!0}}),301===n&&r&&(i={pathname:r})}return i}i.d(t,{A:()=>n})},166919(e,t,i){i.d(t,{A:()=>s});var n=i(278106),a=i(449798),r=i(104735),o=i(879994),l=i(468133);function s(e){let t=(0,n.Zp)(),i=(0,n.zy)(),{isAuth:s}=(0,a.A)(),d=!s&&(0,r.isCloseupPage)(i),c=(0,l.A)(e),u=(0,o.A)(c,d);return u&&t(u.pathname,{replace:!0,state:u.state}),c}},147277(e,t,i){i.d(t,{$G:()=>r,AP:()=>_,G2:()=>a,Kf:()=>s,Nc:()=>u,Qf:()=>l,Tx:()=>o,V1:()=>d,ZD:()=>g,hm:()=>c,iz:()=>f,xP:()=>h,xx:()=>m,ys:()=>p});var n=i(328138);let a={w:9,h:16},r=a.w/a.h,o=800,l=10,s=5e3,d=2e3;function c(e,t=1){return{x:(e??24)/5,y:(e??24)*(t-1)}}let u={COMMENT_REPLY_STICKER:"story_pin_comment_reply_block",GENERIC_STICKER:"story_pin_generic_interactive_sticker_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},p=[u.IMAGE,u.VIDEO],h={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28},_=new n.rk(1),g=new n.K5([_]),m=new n.K5([g]),f=e=>{let t=Math.floor(e||0),i=Math.floor(t/60),n=t-60*i,a=i<10?`${i}`:i,r=n<10?`0${n}`:n;return`${a}:${r}`}},919520(e,t,i){i.d(t,{A:()=>l});var n=i(97407),a=i(296540),r=i(328138),o=i(474848);function l({text:e}){return(0,a.useEffect)(()=>{(0,n.A)("AccessibilityHiddenHeading","/app/www/Header/AccessibilityHiddenHeading.tsx")},[]),(0,o.jsx)(r.az,{display:"visuallyHidden",children:(0,o.jsx)(r._Y,{accessibilityLevel:1,children:e})})}},137141(e,t,i){i.d(t,{A:()=>p});var n=i(97407),a=i(296540),r=i(328138),o=i(643357),l=i(909616),s=i(605257),d=i(239347),c=i(471990),u=i(474848);function p(e){(0,a.useEffect)(()=>{(0,n.A)("BoardSectionCreate","/app/www/boardSection/BoardSectionCreate.tsx")},[]);let t=(0,o.A)(),{backButtonIcon:i,errorMessage:p,name:h,onNextButtonTouch:_,onNameChange:g,selectedPinIds:m=[],useRoundedCorners:f}=e,y=m.length>0?130:64;return(0,u.jsxs)(s.default,{hasFixedHeader:!0,children:[(0,u.jsxs)(l.default,{height:y,paddingY:3,useRoundedCorners:f,children:[(0,u.jsxs)(r.so,{alignItems:"center",justifyContent:"between",children:[(0,u.jsx)(c.default,{color:"default",icon:i||"close",padding:3,size:"sm"}),(0,u.jsx)(r._Y,{accessibilityLevel:1,size:"300",children:t._('Add section', 'for add board section page', 'for add board section page')}),(0,u.jsx)(r.az,{"data-test-id":"create-section-button",children:(0,u.jsx)(r.$n,{accessibilityLabel:t._('Add', 'boardSectionCreate.Add.Button.Text', 'Add button accessibility label for board section create page'),color:"primary",disabled:""===h.trim(),onClick:_,size:"lg",text:t._('Next', 'Next button for board section create page', 'Next button for board section create page')})})]}),m&&(0,u.jsx)(d.A,{selectedPinIds:m})]}),(0,u.jsx)(r.az,{"data-test-id":"addSectionName",paddingX:2,paddingY:3,children:(0,u.jsx)(r.A_,{errorMessage:p||"",id:"section-name-input",label:t._('Name', 'boardSectionCreate.TextField.Name.Label', 'TextField label to Name on BoardSectionCreate'),onChange:e=>g(e.event),size:"lg",value:h})})]})}},683856(e,t,i){i.d(t,{A:()=>m});var n=i(97407),a=i(296540),r=i(671468),o=i(328138),l=i(449798),s=i(643357),d=i(468133),c=i(729816),u=i(691854),p=i(239727),h=i(175627),_=i(923520),g=i(474848);function m({excludeBoardId:e,hideSectionPickerList:t,onRepin:i}){var m;(0,a.useEffect)(()=>{(0,n.A)("RepinBoard","/app/www/boardSection/RepinBoard.tsx")},[]);let f=(0,s.A)(),y=(0,l.A)(),b=(m=y.isAuth?y.username:"",(0,d.A)({name:"BoardsResource",options:u.w.options({username:m,boardOrder:"custom",filterStories:!0,mixPublicSecret:!0})}),(0,r.d4)(e=>(0,p.A)(e)||[])),[x,P]=(0,a.useState)(null);return b.length>0&&(x&&!t?(0,g.jsx)(_.A,{boardId:x?.id,repin:(e,t)=>{x&&i(x,t)},showSectionRep:!0}):(0,g.jsxs)(o.az,{"data-test-id":"board-picker-row-container",children:[(0,g.jsx)(o.az,{marginTop:3,children:(0,g.jsx)(o.KJ,{children:f._('All boards', 'title for board picker all boards section', 'title for board picker all boards section')})}),(0,g.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{paddingBottom:`${c.U}px`}},paddingY:3,children:b.filter(t=>t.id!==e).map(e=>(0,g.jsx)(h.A,{boardId:e.id,onBoardSelected:n=>{!t&&n&&e?P(e):i(e)}},e.id))})]}))}},469949(e,t,i){i.d(t,{LY:()=>I,Ay:()=>T});var n=i(97407),a=i(296540),r=i(671468),o=i(278106),l=i(328138),s=i(55268),d=i(643357),c=i(301914),u=i(909616),p=i(605257),h=i(211974),_=i(729816),g=i(683856),m=i(239347),f=i(818663),y=i(22504),b=i(684059),x=i(972756),P=i(87220);let v=e=>t=>{let{source:i,target:n,pinIds:a}=e;if(t({type:"PINS_MOVE",payload:e}),i.boardlessPins||n.boardId!==i.boardId){let e={board_id:n.boardId,pin_ids:a,section_id:n.sectionId};return b.A.create("BulkEditResource",e).callUpdate()}if(n.sectionId){let e={section_id:n.sectionId,pins:a},i="BoardSectionEditResource";return b.A.create(i,e).callUpdate().then(n=>{let a=(0,y.S8)(n.resource_response.data,P.A[i]);return t((0,x.md)(i,e,n,a)),n})}let r={section_id:i.sectionId,pins:a};return b.A.create("BoardSectionPinsResource",r).callDelete()};var A=i(844962),w=i(471990),S=i(923520),k=i(474848);function j(e,t,i){return e?i._('Got it! Hang tight while we move all those Pins...', 'Toast message for bulk pins move.', 'Toast message for bulk pins move.'):t?i._('Saved to section!', ' - ', ' -- '):i._('Saved to board!', ' - ', ' -- ')}function I({onAddNewSection:e,useIconWithBackground:t}){(0,a.useEffect)(()=>{(0,n.A)("RepinSection","/app/www/boardSection/RepinSection.tsx")},[]);let i=(0,d.A)();return(0,k.jsx)(c.A,{alignCenter:t,height:t?_.w:_.U,children:(0,k.jsx)(f.A,{onTouch:e,pressState:"none",children:(0,k.jsxs)(l.az,{alignItems:"center","data-test-id":"addSectionButton",display:"flex",padding:+!t,children:[t?(0,k.jsx)(l.az,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},rounding:200,children:(0,k.jsx)(l.In,{accessibilityLabel:i._('Create board button', 'RepinSection.CreateBoard.Button', 'accessibility label for create board button'),color:"default",icon:"plus",size:20})}):(0,k.jsx)(l.In,{accessibilityLabel:i._('Add section button', ' - ', ' -- '),color:"error",icon:"circle-plus",size:38}),t?(0,k.jsx)(l.az,{marginStart:2,children:(0,k.jsx)(l.KJ,{size:"400",weight:"bold",children:i._('Add section', 'Add new section to Pin to', 'Add new section to Pin to')})}):(0,k.jsx)(l.az,{marginStart:3,children:(0,k.jsx)(l.KJ,{weight:"bold",children:i._('Add section', 'Add new section to Pin to', 'Add new section to Pin to')})})]})})})}class z extends a.PureComponent{constructor(...e){var t,i,n;super(...e),t="onRepinToBoard",i=e=>{e.section_count?this.props.onRepinToBoardWithSections(e):this.props.repinToOtherBoard(e.id,this.props.i18n)},(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}render(){let{boardId:e,boardSectionId:t,orginalBoardId:i,onAddNewSection:n,repin:a,hideBoardPickerRow:r,selectedPinIds:o,isCollaborative:s}=this.props,d=i===e;return(0,k.jsxs)(p.default,{hasFixedHeader:!0,children:[(0,k.jsxs)(u.default,{hasBorder:!0,height:140,children:[(0,k.jsxs)(l.so,{alignItems:"center",justifyContent:"start",children:[(0,k.jsx)(l.az,{column:2,children:(0,k.jsx)(w.default,{})}),(0,k.jsx)(l.az,{column:8,children:(0,k.jsx)(l._Y,{accessibilityLevel:1,align:"center",size:"300",children:this.props.i18n._('Choose section', 'title for section selection in repin flow', 'title for section selection in repin flow')})}),(0,k.jsx)(l.az,{column:2})]}),(0,k.jsx)(m.A,{selectedPinIds:o})]}),e&&(0,k.jsx)(S.A,{boardId:e,hideBoardPickerRow:d&&r,originalBoardId:i,repin:a,sectionId:t}),d&&(0,k.jsxs)(l.az,{children:[!s&&(0,k.jsx)(g.A,{excludeBoardId:e,hideSectionPickerList:!0,onRepin:this.onRepinToBoard}),(0,k.jsx)(I,{onAddNewSection:n})]})]})}}let T=function(e){let{inSelectAll:t,pinIds:i,orginalBoardId:n,boardSectionId:a,onRefreshBoardSection:l,url:c}=e,{showToast:u}=(0,h.CG)(),p=(0,d.A)(),_=(0,o.Zp)(),g=(0,r.wA)(),m=async(e,r,o)=>{let d=r&&r.id,p={boardId:n,sectionId:a},h={boardId:e,sectionId:d},m=t?(0,A.A)({source:p,target:h,excludePinIds:i}):v({source:p,target:h,pinIds:i});n!==e?(await g(m),_(c,{})):(await g(m),l&&await l()),u(({hideToast:e})=>(0,k.jsx)(s.A,{onHide:e,text:j(t,d,o)}))},f=async(e,r)=>{let o={boardId:n,sectionId:a},l={boardId:e,sectionId:void 0};u(({hideToast:e})=>(0,k.jsx)(s.A,{onHide:e,text:j(t,void 0,r)})),await g(t?(0,A.A)({source:o,target:l,excludePinIds:i}):v({source:o,target:l,pinIds:i})),_(-2)};return(0,k.jsx)(z,{...e,i18n:p,repin:m,repinToOtherBoard:f})}},239347(e,t,i){i.d(t,{A:()=>d});var n=i(97407),a=i(296540),r=i(328138),o=i(643357),l=i(925177),s=i(474848);function d({selectedPinIds:e}){(0,a.useEffect)(()=>{(0,n.A)("SelectedPinsPreview","/app/www/boardSection/SelectedPinsPreview.tsx")},[]);let t=(0,o.A)(),i=(0,a.useRef)(null),d=(0,l.zy)(),c=(e||[]).map(e=>d[e]).filter(Boolean);(0,a.useEffect)(()=>{let e=i.current;e&&(e.scrollLeft=e.scrollWidth-e.offsetWidth)},[c]);let u=c.map((e,i)=>{let{description:n,images:a}=e,o=a?.["236x"];return(0,s.jsx)(r.az,{marginEnd:1,children:(0,s.jsx)(r.n1,{height:65,rounding:200,wash:!0,width:50,children:o?.url&&(0,s.jsx)(r._V,{alt:!!n?.trim()&&n?.trim()||t._('Selected Pin', 'SelectedPinsPreview.image.accessibilityLabel', 'Accessibility label for Pin image without description'),color:e.dominant_color??"",fit:"contain",naturalHeight:o?.height??1,naturalWidth:o?.width??1,src:o.url})})},i)});return(0,s.jsx)(r.az,{ref:i,display:"flex",marginTop:2,overflow:"scroll",children:u})}},729816(e,t,i){i.d(t,{U:()=>n,w:()=>a});let n=70,a=80},458452(e,t,i){i.d(t,{Bw:()=>o,Em:()=>f,GX:()=>c,Mm:()=>d,NR:()=>g,R2:()=>_,b9:()=>l,kH:()=>m,rQ:()=>p,rS:()=>h,uj:()=>u,zh:()=>s});var n=i(222356),a=i(120690),r=i(221077);let o=e=>e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal'),l=({firstName:e,i18n:t})=>e?(t._('{{ name }} invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends({{ name }}) board')).replace("{{ name }}",e):t._('Your friends invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends board'),s=e=>{let t=(0,r.A)(e.search).board_url;if(t){let e=(0,a.A)(t),i=(0,n.A)({accept_invite:!0,seamless:!0});return e.includes("?")?`${e}&${i}`:`${e}?${i}`}return e.pathname},d=e=>e._('Log in to save this Pin', 'limitedLogin.modalHeader.repin', 'Title on mobile web limited login modal to prompt users to login after they clicked save button.'),c=e=>{let t=e.pathname;if(t.startsWith("/pin/")){let e=t.split("/");if(e.length>2)return`/${e[1]}/${e[2]}/repin/`}return t},u=e=>e._('Log in to send this Pin', 'limitedLogin.modalHeader.send', 'Title on mobile web limited login modal to prompt users to login after they clicked send button.'),p=e=>e._('Log in to edit this Pin', 'limitedLogin.modalHeader.editPin', 'Title on mobile web limited login modal to prompt users to login after they clicked edit button.'),h=e=>{let t=e.pathname;if(t.startsWith("/pin/")){let e=t.split("/");if(e.length>2)return`/${e[1]}/${e[2]}/edit/`}return t},_=e=>e._('Log in to create a Pin or board', 'limitedLogin.modalHeader.create', 'Title on mobile web limited login modal to prompt users to login to create a Pin or board.'),g=e=>e._('Log in to hide this Pin', 'limitedLogin.modalHeader.hidePin', 'Title on mobile web limited login modal to prompt users to login after they clicked hide Pin button.'),m=e=>e._('Log in to share the profile', 'limitedLogin.modalHeader.shareProfile', 'Title on mobile web limited login modal to prompt users to login after they clicked share button on profile page.'),f=e=>e._('Log in to create a board', 'limitedLogin.modalHeader.createBoard', 'Title on mobile web limited login modal to prompt users to login to create a board.')},39346(e,t,i){i.d(t,{A:()=>d});var n=i(97407),a=i(296540),r=i(643357),o=i(458452),l=i(575856),s=i(474848);function d({children:e,callbackFunction:t,modalHeader:i,nextLocation:d}){(0,a.useEffect)(()=>{(0,n.A)("WithLimitedLogin","/app/www/login/duplo/LimitedLogin/WithLimitedLogin.tsx")},[]);let c=(0,r.A)(),{viewer:u,loginForMore:p,limitedLoginModalSubheader:h,limitedLoginModalNextLocation:_}=(0,l.x)(),g="LIMITED_LOGIN"===u.type;return(0,s.jsx)("div",{onClickCapture:e=>{g&&(t&&t(),e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),p?.setVisible(!0),h?.setText(i||(0,o.Bw)(c)),d&&_?.setRoute(d))},children:e})}},287965(e,t,i){i.d(t,{A:()=>s});var n=i(296540),a=i(671468),r=i(211974),o=i(654599),l=i(7109);function s(){let e=(0,a.wA)(),{showToast:t,showOneToast:i}=(0,r.CG)(),s=(0,a.Pj)(),d=(0,n.useCallback)((i,n)=>{n||e((0,l.TO)()),t(i)},[e,t]);return{showToast:t,showOneToast:i,showRepinConfirmation:(t,i)=>{i||e((0,l.ml)()),setTimeout(()=>{s.getState().session.isShowingRepinConfettiAnimation?setTimeout(()=>{d(t,i)},o.Lx):d(t,i)},o._b)}}}},494324(e,t,i){i.d(t,{S5:()=>tP,Ay:()=>tv});var n,a,r,o,l,s,d,c,u,p,h,_=i(97407),g=i(296540),m=i(671468),f=i(234784),y=i(278106),b=i(418562),x=i(328138),P=i(275552),v=i(676477),A=i(199190),w=i(273869),S=i(449798),k=i(698781),j=i(422193),I=i(643357),z=i(622165),T=i(344524),R=i(166919),B=i(568677),F=i(511940),C=i(239727),E=i(882101);let L=(void 0!==n||(n=i(793889)).hash&&"a8967078f1de7ce3a263a224d0d0e710"!==n.hash&&console.error("The definition of 'useFetchBoardTitleSuggestionsQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),K=e=>{let{v3GetPinQuery:t}=(0,f.useLazyLoadQuery)(L,{pinId:e});if(t?.error?.message)throw t?.error;return t?.data?.boardTitleSuggestions?.map(({title:e})=>e).filter(Boolean)||[]};var O=i(696561),M=i(55268),D=i(211974),N=i(137141),H=i(287965),$=i(281523),Y=i(146459),G=i(135954),W=i(682319),V=i(474848);let J=(void 0!==a||(a=i(953349)).hash&&"b3ec14d29962e56f80dd52e7e6d7a6d9"!==a.hash&&console.error("The definition of 'RepinAddSection_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function U({createSectionAndRepin:e,errorMessage:t,i18n:i,pin:n,setErrorMessage:a,useRoundedCorners:r}){let[o,l]=(0,g.useState)("");return(0,V.jsx)(N.A,{backButtonIcon:"chevron-left",errorMessage:t,name:o,onNameChange:e=>{a(""),l(e.target.value)},onNextButtonTouch:()=>{e(o,i)},selectedPinIds:[n.entityId],useRoundedCorners:r})}function Q(e){(0,g.useEffect)(()=>{(0,_.A)("RepinAddSection","/app/www/save/duplo/RepinAddSection.tsx")},[]);let{boardId:t,isEditingPin:i,onSuccess:n,pinKey:a,pinBoardId:r,pinSectionId:o,trackingParams:l,useRoundedCorners:s}=e,d=(0,k.A)(J,a),c=(0,m.wA)(),u=(0,y.Zp)(),p=(0,I.A)(),{showToast:h}=(0,D.CG)(),f=(0,P.A)(),b=(0,W.Y)(),{checkExperiment:x}=(0,z.A)(),v=(0,O.Ts)(),[A,w]=(0,g.useState)(""),{showRepinConfirmation:S}=(0,H.A)(),j=e=>u(e);return(0,V.jsx)(U,{createSectionAndRepin:e=>{let a=e=>w(e.message_detail||e.message);c((0,$.A)(t,[],e,f)).then(e=>{h(({hideToast:e})=>(0,V.jsx)(M.A,{onHide:e,text:p._('Section added!', ' - ', ' -- ')}));let s=e.resource_response.data;c((0,G.c)({checkExperiment:x,i18n:p,logContextEvent:f,pinId:d.entityId,boardId:t,onSuccess:i?void 0:()=>{v("Save",{pin_id:d.entityId}),n()},showRepinConfirmation:S,section:s,trackingParams:{clientTrackingParams:l,pinnedToBoardId:d.pinnedToBoard?d.pinnedToBoard.entityId:""},historyPush:j,savePinId:b?.save??(()=>{})})).then(()=>{d&&r&&c((0,Y.t)({pinId:d.entityId,boardId:r,boardSectionId:o,clientTrackingParams:l})).then(()=>d.pinnedToBoard?u(d.pinnedToBoard.url??"",{replace:!0}):void 0)}).catch(a)}).catch(a)},errorMessage:A,i18n:p,pin:d,setErrorMessage:w,useRoundedCorners:s})}function q(){let e=(0,y.zy)(),{boardId:t,id:i}=(0,y.g)(),{search:n}=e,a=new URLSearchParams(n),r=!!a.get("isEditingPin"),o=a.get("pinBoardId")??"";return{boardId:t,pinId:i,isEditingPin:r,pinBoardId:o,pinSectionId:a.get("pinSectionId")??"",originalPinId:a.get("originalPinId")??"",isFromToast:!!a.get("isFromToast")}}let Z=(void 0!==r||(r=i(304209)).hash&&"2d5f10a7f4e54a8cf9118f134bcd7386"!==r.hash&&console.error("The definition of 'MobileRepinCreateScreen_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function X({pinKey:e,trackingParams:t,useRoundedCorners:i}){(0,g.useEffect)(()=>{(0,_.A)("MobileRepinCreateScreen","/app/www/save/MobileRepinCreateScreen.tsx")},[]);let n=(0,k.A)(Z,e),a=(0,y.Zp)(),{boardId:r,isEditingPin:o,pinBoardId:l,pinSectionId:s}=q();return r?(0,V.jsx)(Q,{boardId:r,isEditingPin:o,onSuccess:()=>{a(-3)},pinBoardId:l,pinKey:n,pinSectionId:s,trackingParams:t,useRoundedCorners:i}):null}var ee=i(327467),et=i(769178),ei=i(909616),en=i(605257),ea=i(469949),er=i(919520),eo=i(580072);function el(e,t){return!!(e&&e.placement_id&&e.experience_id===t)}var es=i(458452),ed=i(39346),ec=i(905668);let eu="cubic-bezier(0.66, 0.025, 0.33, 0.975)",ep=(0,ec.B4)((e,t,i,n,a)=>{let r=e,o=t,l=0,s=0,d="",c=Math.floor(t/3);if("shrinkToPin"===i&&(l="24px",s=1,r=Math.floor(3*c/2),o=c),"pinToGrid"===i&&n&&a){let e=n.getBoundingClientRect(),t=a.getBoundingClientRect(),i=t.x+t.width/2-(e.x+e.width/2),u=t.y+t.height/2-(e.y+e.height/2);d=`translate(${i}px, ${u}px)`,l="24px 0px 0px 24px",s=1,r=c,o=c}return{borderRadius:l,height:r,opacity:s,overflow:"hidden",width:o,WebkitTransformOrigin:"center center",transformOrigin:"center center",WebkitTransform:d,transform:d,WebkitTransition:`all .42s ${eu}`,transition:`all .42s ${eu}`}}),eh=(0,ec.B4)(e=>({opacity:+!!e,WebkitTransition:`opacity .42s ${eu}`,transition:`opacity .42s ${eu}`})),e_=(0,ec.B4)(e=>({opacity:+!e,WebkitTransition:`all .25s ${eu}`,transition:`all .25s ${eu}`,zIndex:3}));function eg({completeExperience:e,pinDominantColor:t,pinImageHeight:i,pinImageWidth:n,pinImageUrl:a}){let r,o,l,s;(0,g.useEffect)(()=>{(0,_.A)("BoardCreateEdu","/app/www/nux/BoardCreateEdu.tsx")},[]);let d=(0,I.A)(),[c,u]=(0,g.useState)("visible"),[p,h]=(0,g.useState)("none"),m=window.innerWidth,f=Math.floor(m/3),y=Math.floor(m/6);(0,g.useEffect)(()=>{a&&"none"===p&&(r=setTimeout(()=>{h("shrinkToPin")},85)),a&&"shrinkToPin"===p&&(o=setTimeout(()=>{h("pinToGrid")},2e3)),"pinToGrid"===p&&"visible"===c&&(l=setTimeout(()=>{u("hidden")},2e3)),"hidden"===c&&(s=setTimeout(()=>{u("none"),e()},300))}),(0,g.useEffect)(()=>()=>{clearTimeout(r),clearTimeout(o),clearTimeout(l),clearTimeout(s)},[]);let b=(0,g.useRef)(null),P=(0,g.useRef)(null);return(0,V.jsxs)(x.az,{alignItems:"center",bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:e_("hidden"===c)},direction:"column",display:"none"===c?"none":"flex",justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,children:[(0,V.jsxs)(x.az,{alignItems:"center",display:"flex",height:m/2,justifyContent:"center",marginBottom:8,position:"relative",width:"100%",children:[(0,V.jsx)(x.az,{dangerouslySetInlineStyle:{__style:eh("pinToGrid"===p)},position:"absolute",children:(0,V.jsx)(x.n1,{height:f,rounding:600,width:f+y+1,children:(0,V.jsxs)(x.so,{alignItems:"stretch",justifyContent:"between",children:[(0,V.jsx)(x.az,{ref:P,color:"transparent",height:f,width:f}),(0,V.jsxs)(x.so,{alignItems:"stretch",direction:"column",justifyContent:"between",children:[(0,V.jsx)(x.az,{color:"secondary",height:y,width:y}),(0,V.jsx)(x.az,{color:"secondary",height:y,width:y})]})]})})}),(0,V.jsx)(x.az,{ref:b,dangerouslySetInlineStyle:{__style:ep(i/n*m,m,p,b.current,P.current)},position:"absolute",children:(0,V.jsx)(x._V,{alt:d._('Pin image', 'Pin image on repin page', 'Pin image on repin page'),color:t,fit:"cover",naturalHeight:i,naturalWidth:n,src:a})})]}),(0,V.jsx)(x.az,{marginBottom:8,marginTop:8,paddingX:12,children:(0,V.jsx)(x._Y,{align:"center",size:"600",children:d._('Keep your ideas organized by creating a board', 'boardPicker.edu.heading', 'board create education shown before user create their first board')})})]})}var em=i(306338),ef=i(34963),ey=i(376159);function eb(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let ex=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],eP=(e,t)=>Math.random()*((e||1)-(t||0))+(t||0),ev=e=>Math.PI/180*e;class eA extends g.PureComponent{constructor(...e){super(...e),eb(this,"animationTimer",null),eb(this,"canvasRemovalTimer",null),eb(this,"childrenContainerRef",(0,g.createRef)()),eb(this,"containerRef",(0,g.createRef)()),eb(this,"buildCanvas",()=>{if(!this.containerRef.current)return null;let e=window.innerWidth,{height:t,top:i}=this.containerRef.current.getBoundingClientRect(),n=document.createElement("canvas");return n.style.position="absolute",n.style.left="0px",n.style.top=`${i-(e-t)/2}px`,n.style.pointerEvents="none",n.style.width=`${e}px`,n.style.height=`${e}px`,n.width=e,n.height=e,n}),eb(this,"explode",()=>{let e=this.buildCanvas();if(!e)return;let t=this.containerRef.current,i=this.childrenContainerRef.current,n=e.getContext("2d");t?.insertBefore(e,i);let a=Array.from(Array(120)).map(()=>({x:e.width/2,y:e.height/2,radius:Math.round(eP(10,30)),color:ex[Math.floor(Math.random()*ex.length)],degree:Number(eP(0,360).toFixed(1)),speed:Math.round(eP(0,25)),friction:.9,opacity:Number(eP(0,.5).toFixed(1)),yVel:0,gravity:.04})),r=(e,t,i,n)=>{window.requestAnimationFrame(()=>r(e,t,i,n)),t.clearRect(0,0,i,n),e.forEach(e=>{e.x+=e.speed*Math.cos(ev(e.degree)),e.y+=e.speed*Math.sin(ev(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})};n&&r(a,n,e.width,e.height),this.canvasRemovalTimer=setTimeout(()=>{t?.removeChild(e)},(this.props.delay||0)+1e3)})}componentDidUpdate(e){let{delay:t,startAnimation:i}=this.props,{startAnimation:n}=e;i&&n!==i&&(this.animationTimer=setTimeout(this.explode,t))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return(0,V.jsx)(x.az,{ref:this.containerRef,children:(0,V.jsx)(x.az,{ref:this.childrenContainerRef,children:this.props.children})})}}function ew(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}eb(eA,"defaultProps",{delay:0});let eS=(e,t,i)=>{let n=[],a=t.current?.getBoundingClientRect(),r=i.current?.getBoundingClientRect();if(a&&r){let e={x:r.left-a.left,y:r.top-a.top},t={x:r.width/a.width,y:r.height/a.height};n.push(`translate(${e.x}px, ${e.y}px)`),n.push(`scale(${t.x}, ${t.y})`)}return{WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?n.join(" "):"none",transform:e?n.join(" "):"none",WebkitTransition:"all .5s ease-in-out",transition:"all .5s ease-in-out",borderRadius:e?"8px 0px 0px 0px":"8px",overflow:"hidden",marginBottom:24}};class ek extends g.PureComponent{constructor(...e){super(...e),ew(this,"state",{startAnimation:!1,animationStyles:null}),ew(this,"dismissTimer",null),ew(this,"pinRef",(0,g.createRef)()),ew(this,"pinDestinationRef",(0,g.createRef)()),ew(this,"handleAnimationAndCompletion",()=>{let{onComplete:e,savePin:t,selectedBoardName:i}=this.props;if(!i)return;let n=this.startAnimation();Promise.all([n,t(i)]).then(t=>{let[,n]=t;e(n,i)}).catch(e=>{n.then(()=>{e?.onError?.()})})}),ew(this,"startAnimation",()=>new Promise(e=>{let t=eS(!0,this.pinRef,this.pinDestinationRef);this.setState({startAnimation:!0,animationStyles:t},()=>{this.dismissTimer=setTimeout(()=>{e()},2600)})}))}componentWillUnmount(){this.dismissTimer&&clearTimeout(this.dismissTimer)}componentDidUpdate(){let{selectedBoardName:e}=this.props,{startAnimation:t}=this.state;e&&!t&&this.handleAnimationAndCompletion()}render(){let{pinDominantColor:e,pinImageUrl:t,selectedBoardName:i}=this.props,{startAnimation:n,animationStyles:a}=this.state;return(0,V.jsxs)(g.Fragment,{children:[(0,V.jsx)(x.ib,{top:ey.ui,zIndex:new x.rk(3),children:(0,V.jsx)(x.az,{alignItems:"center",color:n?"transparent":"default",display:"flex",justifyContent:"center",children:(0,V.jsx)(x.az,{ref:this.pinRef,dangerouslySetInlineStyle:{__style:n&&a?a:eS(!1,this.pinRef,this.pinDestinationRef)},height:84,position:"relative",width:84,children:(0,V.jsx)(x._V,{alt:this.props.i18n._('Pin image', 'Pin image on repin page', 'Pin image on repin page'),color:e,fit:"cover",naturalHeight:84,naturalWidth:84,src:t})})})}),(0,V.jsx)(x.az,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"none",opacity:+!!n,WebkitTransition:"opacity .4s ease-in-out",transition:"opacity .4s ease-in-out",zIndex:2}},left:!0,position:"fixed",right:!0,top:!0,children:(0,V.jsxs)(x.so,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,V.jsx)(eA,{delay:1200,startAnimation:n,children:(0,V.jsx)(x.n1,{rounding:200,width:148,children:(0,V.jsx)(x.so,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:Array.from([,,,,]).map((e,t)=>{let i=t<=1,n=t%2,a=0===t?this.pinDestinationRef:null;return(0,V.jsx)(x.az,{ref:a,color:0===t?"transparent":"secondary",height:72,marginBottom:+!!i,marginEnd:+!n,width:72},t)})})})}),(0,V.jsx)(x.az,{dangerouslySetInlineStyle:{__style:{opacity:+!!n,WebkitTransform:n?"translateY(0)":"translateY(20%)",transform:n?"translateY(0)":"translateY(20%)",WebkitTransition:"all .25s ease-in-out .5s",transition:"all .25s ease-in-out .5s",textAlign:"center",marginTop:"50px"}},paddingX:4,children:(0,V.jsx)(x._Y,{children:(0,ee.vQ)(this.props.i18n._('You saved your first Pin to {{ selectedBoardName }}!', 'First repin confirmation message', 'First repin confirmation message'),{selectedBoardName:i})})})]})})]})}}let ej=function(e){let t=(0,I.A)();return(0,V.jsx)(ek,{...e,i18n:t})};var eI=i(415660),ez=i(796903),eT=i(471990),eR=i(695497),eB=i(14338),eF=i(366700),eC=i(684059),eE=i(427575),eL=i(581818),eK=i(972756),eO=i(871211),eM=i(398304),eD=i(755701),eN=i(407242),eH=i(431210),e$=i(209922),eY=i(789542),eG=i(831282),eW=i(504213),eV=i(584733),eJ=i(197472),eU=i(175627);function eQ({pinId:e,handleSelected:t,surfaceOriginViewParameter:i}){(0,g.useEffect)(()=>{(0,_.A)("ProfilePickerRow","/app/www/save/duplo/ProfilePickerRow.tsx")},[]);let n=(0,I.A)(),a=(0,P.A)();return(0,g.useEffect)(()=>{a({view_parameter:3990,event_type:13,view_type:21,aux_data:{board_picker_surface_origin:i,pin_id:e}})},[]),(0,V.jsx)(x.Rp,{onTap:()=>{t(!1,null)},rounding:200,children:(0,V.jsxs)(x.az,{alignItems:"center",column:12,"data-test-id":"board-picker-row",display:"flex",marginBottom:4,rounding:200,children:[(0,V.jsx)(x.az,{alignItems:"center",color:"secondary",display:"flex",flex:"none",height:48,justifyContent:"center",rounding:200,width:48,children:(0,V.jsx)(x.In,{accessibilityLabel:n._('Profile', 'save.ProfilePickerRow.IconAccessibilityLabel', 'Accessibility label for icon on option to save Pin to profile'),color:"default",icon:"clock-history",size:22})}),(0,V.jsx)(x.az,{direction:"column",display:"flex",justifyContent:"center",marginStart:2,overflow:"hidden",width:"100%",children:(0,V.jsx)(x.KJ,{lineClamp:1,size:"400",weight:"bold",children:n._('Profile', 'save.ProfilePickerRow', 'Option to save Pin to profile')})})]})})}var eq=i(918312);function eZ(){let e=(0,eq.useRelayEnvironment)();return(0,g.useCallback)(t=>{e&&(0,eq.commitLocalUpdate)(e,e=>{e.get(t)?.invalidateRecord()})},[e])}let eX=e=>e.map(e=>({board_title_id:String(e.id),board_title_kind:JSON.parse(e.recommendation_reason??"{}").reason,board_title:String(e.name),board_title_score:JSON.parse(e.recommendation_reason??"{}").score})),e0=e=>"profile"===e?3990:"topChoices"===e?3988:3989;var e1=i(227957);let e2=(void 0!==o||(o=i(757625)).hash&&"76b22cc5d658befe1dc27454d3aee77f"!==o.hash&&console.error("The definition of 'BoardPickerList_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o),e4=(e,t,i)=>({field_set_key:"detailed",id:e,preserve_component_state:t,...i?{orbac_subject_id:i}:Object.freeze({})});function e3({boards:e,boardsShortlist:t=[],closeModal:i,dismissFlyout:n,navigate:a,isEditingPin:r,isFromToast:o,logContextEvent:l,onSelect:s,originalPinId:d,pinKey:c,pinBoardId:u,saveToProfileEnabled:p,surfaceOriginViewParameter:h,trackingParams:f}){(0,g.useEffect)(()=>{(0,_.A)("BoardPickerList","/app/www/save/duplo/BoardPickerList.tsx")},[]);let b=(0,I.A)(),P=(0,y.zy)(),v=(0,k.A)(e2,c),A=eZ(),w=(0,m.wA)(),j=(0,eH.A)(),T=(0,W.Y)(),R=(0,O.Ts)(),B=P.state&&P.state.isOneTapSave,{checkExperiment:F}=(0,z.A)(),{showRepinConfirmation:C,showToast:L}=(0,H.A)(),K=e=>a(e),D=t.map(e=>e.id);p&&D.unshift("PROFILE_PINS");let N=(0,eM.A)(),$=(0,S.A)(),Y=(0,E.Eo)(),J=(0,eD.H7)($,N),{logStat:U}=(0,eN.xI)(),Q=p&&F("mweb_curation_board_picker_reorder_profile_option").anyEnabled;(0,eO.A)(()=>{D&&l({event_type:13,clientTrackingParams:f.clientTrackingParams,component:7,element:1001,view_type:3,aux_data:{pin_id:v.entityId,suggested_boards:D}})}),(0,g.useEffect)(()=>{l({view_parameter:3988,event_type:13,view_type:21,aux_data:{board_picker_surface_origin:h,pin_id:v.entityId,board_picker_suggested_boards:JSON.stringify(eX(t))}})},[t]);let q=e=>w((0,e$.zY)(e)),Z=j({fn:async(e,c,p)=>{if(e&&c)s(c,p);else try{if(!r){let e=!c?.id,i=await (({boardId:e,i18n:i,isQuickSave:r,isBoardlessSave:o})=>{n(),U("main_pin_repin");let s=JSON.stringify(eX(t));return w((0,G.c)({checkExperiment:F,i18n:i,isQuickSave:r,logContextEvent:l,pinId:v.entityId,boardId:e,onSuccess:()=>{R("Save",{pin_id:v.entityId,is_promoted:v.isPromoted}),a(-1),(o||r)&&(0,e1.A)({dispatch:w,viewerUser:Y})},originalPinId:d,showRepinConfirmation:C,trackingParams:f,historyPush:K,suggestedBoardIds:D,boardPickerSuggestedBoards:s,savePinId:T?.save??(()=>{})}))})({boardId:c?.id,i18n:b,isQuickSave:e,isBoardlessSave:"profile"===p});if(i){let e=i?.id;if(B){let t;t={boardId:c?.id,localPinId:e,pinId:v.entityId,nodeId:v.__id},w((0,eW.U)({...t}))}else v?.entityId&&w((0,eV.J4)({id:v.entityId,nodeId:v.__id,boardId:c.id,title:c.name??"",url:c.url??"",localPinId:e}))}}if(r){let e=c?.id,t={board_id:e,id:v.entityId,...J?{orbac_subject_id:J}:Object.freeze({})},n=u!==e;eC.A.create("PinResource",t).callUpdate().then(i=>{let r;if(n&&e&&u){let t,i,n;t={selectedPinIds:[v.entityId],source:{boardId:u,sectionId:void 0},target:{boardId:e,sectionId:void 0}},w((0,eG.B)(t)),q({boardId:e,sectionId:void 0,increment:1}),q({boardId:u,sectionId:void 0,increment:-1}),$.isAuth&&$.id&&!u&&(i=$.id,n=v.entityId,w((0,eY.J6)({feedId:i,feedType:eJ.A.BOARDLESS_PINS,itemIds:[n],itemType:"pin"})))}w((0,eL.O)("PinResource",{options:t})),r=v.entityId,w((0,eK.Q5)("PinResource",e4(r,!0,J))),A(v.__id),w((0,eK.O8)("PinResource",e4(i.resource_response.data.id,!1,J),i)),a(-1)}),o&&i()}}catch(e){L(({hideToast:t})=>(0,V.jsx)(M.A,{duration:5e3,onHide:t,text:(0,eE.A)(e,"message")||b._('Sorry! Something went wrong on our end.', 'error during repin', 'error during repin')}))}},modalHeader:(0,es.Mm)(b)}),X=(0,V.jsx)(eQ,{handleSelected:(e,t)=>Z(e,{...t,gridIndex:0},"profile"),pinId:v.entityId,surfaceOriginViewParameter:h});return(0,V.jsxs)(x.so,{direction:"column",gap:4,children:[(0,V.jsxs)(x.az,{children:[p&&!Q&&X,t.length>0&&(0,V.jsx)(x.az,{marginBottom:4,marginTop:2,children:(0,V.jsx)(x._Y,{accessibilityLevel:3,size:"300",children:(0,V.jsx)(x.KJ,{inline:!0,children:b._('Top choices', 'boardPicker.header.topChoices', 'Header of a list of user\'s boards')})})}),t.map((e,t)=>(0,V.jsx)(eU.A,{boardId:e.id,onBoardSelected:i=>Z(i,{...e,gridIndex:t},"topChoices"),showSingleBoardRep:!0},e.id))]}),(0,V.jsxs)(x.az,{"data-test-id":"all-boards-list",children:[(0,V.jsx)(x.az,{marginBottom:4,children:(0,V.jsx)(x._Y,{accessibilityLevel:3,size:"300",children:(0,V.jsx)(x.KJ,{inline:!0,children:b._('All boards', 'RepinFlow.BoardPickerList.AllBoards', 'Board picker list all boards title')})})}),e.map((e,t)=>(0,V.jsx)(eU.A,{boardId:e.id,onBoardSelected:i=>Z(i,{...e,gridIndex:t},"allBoards"),showSingleBoardRep:!0},e.id)),Q&&X]})]})}var e7=i(818663);let e8=()=>((0,g.useEffect)(()=>{(0,_.A)("EmptyBoardRep","/app/www/save/duplo/EmptyBoardRep.tsx")},[]),(0,V.jsx)(x.az,{color:"secondary",display:"inlineBlock",height:60,minWidth:60,overflow:"hidden",position:"relative",rounding:400,children:(0,V.jsxs)(g.Fragment,{children:[(0,V.jsx)(x.az,{color:"default",dangerouslySetInlineStyle:{__style:{left:"50%"}},height:"100%",position:"absolute",width:1}),(0,V.jsx)(x.az,{color:"default",dangerouslySetInlineStyle:{__style:{top:"50%"}},height:1,position:"absolute",right:!0,width:"50%"})]})}));var e6=i(891484),e9=i(699203);let e5=(void 0!==l||(l=i(486843)).hash&&"69ffcdea57a7778d2ebbcd41c276c0d0"!==l.hash&&console.error("The definition of 'BoardTitleSuggestionList_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function te({isEditingPin:e,isFirstBoard:t,isFromToast:i,navigate:n,onFirstBoardCreate:a,originalPinId:r,pinBoardId:o,pinKey:l,pinSectionId:s,surfaceOriginViewParameter:d,titleSuggestions:c,clientTrackingParams:u}){(0,g.useEffect)(()=>{(0,_.A)("BoardTitleSuggestionList","/app/www/save/duplo/BoardTitleSuggestionList.tsx")},[]);let p=(0,P.A)(),h=(0,e9.A)(),f=(0,I.A)(),y=(0,eH.A)(),{showRepinConfirmation:b}=(0,H.A)(),v=(0,m.wA)(),A=(0,k.A)(e5,l),w=A.entityId,S=(0,e6.m)({hasRichMetadata:!!A.richMetadata,hasRichMetadataProducts:!!A.richMetadata?.products,hasRichMetadataArticle:!!A.richMetadata?.article,hasRichMetadataRecipe:!!A.richMetadata?.recipe}),j=(0,W.Y)(),T=(0,ez.oW)(),R=(0,eo.A)(u,A.trackingParams),B=e=>n(e),{checkExperiment:F}=(0,z.A)();(0,g.useEffect)(()=>{p({view_parameter:3992,component:13282,event_type:13,view_type:21,aux_data:{board_picker_surface_origin:d,pin_id:w,board_title_suggestions:c}})},[]);let C=async()=>{await void v((0,Y.t)({pinId:w,boardId:o||"",boardSectionId:s,clientTrackingParams:R}));let e=A.pinnedToBoard?.url;A.section?n(`${e??""}${A.section.slug??""}/`??"",{replace:!0}):n(e??"",{replace:!0})},E=y({fn:(o,l,s)=>{p({view_parameter:3992,component:13282,element:23,event_type:101,view_type:91,aux_data:{board_picker_surface_origin:d,pin_id:w,board_title_suggestions:c}}),(({allSuggestions:e,handleCreateBoard:t,index:i,isFBC:n,logContextEvent:a,pinViewParameter:r})=>{t(),a({aux_data:{board_title_list:JSON.stringify(e),is_fbc:n.toString(),selected_board_title_index:i},component:7,element:23,event_type:102,view_parameter:r,view_type:3})})({allSuggestions:s,handleCreateBoard:()=>{t?a(l):h({boardCreateOptions:{name:l,initial_pin_client_tracking_params:[u],privacy:"public"}}).then(t=>{let{url:a="",id:o}=t||{};v((0,G.c)({checkExperiment:F,i18n:f,logContextEvent:p,originalPinId:r,pinId:w,boardId:o,trackingParams:{clientTrackingParams:R,pinnedToBoardId:o},historyPush:B,savePinId:j?.save??(()=>{})})).then(()=>{e?i?n(-1):C():n(-1);let{href:t,text:r}=(0,eR.A)(a,l,f),{duration:s,text:d,thumbnail:c}=(0,em.A)({boardId:o,getReduxBoard:T,pinId:w,viewType:3});b(({hideToast:e})=>(0,V.jsx)(ef.A,{duration:s,href:t,onHide:e,text:d||r,thumbnail:c}))})})},index:o,isFBC:t,logContextEvent:p,pinViewParameter:S})},modalHeader:(0,es.Em)(f)});return c?c.map((e,t,i)=>(0,V.jsx)(x.az,{children:(0,V.jsx)(e7.A,{dataTestId:"board-suggestion-row-button",onTouch:()=>E(t,e,i),pressState:"none",rounding:200,children:(0,V.jsxs)(x.az,{alignItems:"center",display:"flex",paddingY:2,rounding:200,children:[(0,V.jsx)(e8,{}),(0,V.jsx)(x.az,{column:10,marginStart:3,children:(0,V.jsx)(x._Y,{size:"400",children:e})})]})},t)},t)):null}let tt=(void 0!==s||(s=i(946007)).hash&&"475036dcb56a51d3552313200b8c9d45"!==s.hash&&console.error("The definition of 'RepinBoardPicker_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);function ti({allBoards:e,saveToProfileEnabled:t,boardsShortlist:i,closeModal:n,dismissFlyout:a,navigate:r,isEditingPin:o,isFromToast:l,onSelect:s,originalPinId:d,pin:c,pinBoardId:u,pinSectionId:p,trackingParams:h}){let _=(0,P.A)();return(0,V.jsx)(g.Fragment,{children:(0,V.jsx)(e3,{boards:e,boardsShortlist:i,closeModal:n,dismissFlyout:a,isEditingPin:o,isFromToast:l,logContextEvent:_,navigate:r,onSelect:s,originalPinId:d,pinBoardId:u,pinKey:c,pinSectionId:p,saveToProfileEnabled:t,trackingParams:h})})}function tn({allBoards:e,boardsShortlist:t,closeModal:i,saveToProfileEnabled:n,dismissFlyout:a,navigate:r,isEditingPin:o,isFirstRepinExperience:l,isFromToast:s,onFirstBoardCreate:d,originalPinId:c,onSelect:u,pin:p,pinBoardId:h,pinSectionId:_,trackingParams:g,titleSuggestions:m}){let f=(0,I.A)(),y=l||0===e.length&&!n,b=(0,P.A)(),v=()=>(0,V.jsx)(te,{clientTrackingParams:g.clientTrackingParams,isEditingPin:o,isFirstBoard:y,isFromToast:s,navigate:r,onFirstBoardCreate:d,originalPinId:c,pinBoardId:h,pinKey:p,pinSectionId:_,titleSuggestions:m});return y?(0,V.jsxs)(x.az,{paddingX:1,children:[(0,V.jsx)(x.az,{marginBottom:4,children:(0,V.jsx)(x.KJ,{children:f._('Tap to create your first board', 'CTA for board title suggestions', 'Explain to user that tapping on suggestion creates a board')})}),v()]}):(0,V.jsxs)(x.az,{marginBottom:4,children:[(0,V.jsx)(e3,{boards:e,boardsShortlist:t,closeModal:i,dismissFlyout:a,isEditingPin:o,isFromToast:s,logContextEvent:b,navigate:r,onSelect:u,originalPinId:c,pinBoardId:h,pinKey:p,pinSectionId:_,saveToProfileEnabled:n,trackingParams:g}),m?(0,V.jsxs)(x.az,{children:[(0,V.jsx)(x.az,{paddingY:1,children:(0,V.jsx)(eF.A,{children:(0,V.jsx)(x.cG,{})})}),(0,V.jsx)(x.az,{paddingY:4,children:(0,V.jsx)(x.KJ,{children:f._('Or tap to create a new board', 'boardPicker.suggestedBoardName.title', 'Title for repin page suggested board name section')})}),v()]}):(0,V.jsx)(x.az,{paddingY:6,children:(0,V.jsx)(x.y$,{accessibilityLabel:f._('Loading repin page content', ' - ', ' -- '),show:!0})})]})}function ta({allBoards:e,boardsShortlist:t,closeModal:i,saveToProfileEnabled:n,dismissFlyout:a,navigate:r,isEditingPin:o,isFetchingBoards:l,isFirstRepinExperience:s,isFromToast:d,onFirstBoardCreate:c,onSelect:u,originalPinId:p,pinKey:h,pinBoardId:m,pinDescription:f,pinSectionId:y,surfaceOriginViewParameter:b,saveSessionId:v}){(0,g.useEffect)(()=>{(0,_.A)("RepinBoardPicker","/app/www/save/duplo/RepinBoardPicker.tsx")},[]);let A=(0,k.A)(tt,h),w=K(A.entityId),S=(0,I.A)(),j=(0,P.A)(),z={clientTrackingParams:(0,eB.A)({pinKey:A}),pinnedToBoardId:A.pinnedToBoard?A.pinnedToBoard.entityId:""},T=(e,i)=>{j({event_type:101,component:13282,clientTrackingParams:z.clientTrackingParams,object_id_str:e.id,view_type:91,view_parameter:e0(i),aux_data:{board_id:e.id,board_component:e0(i),board_picker_surface_origin:b,board_picker_suggested_boards:JSON.stringify(eX(t)),board_title_suggestions:w,board_index:e.gridIndex,is_profile_save:"profile"===i,pin_id:A.entityId,save_session_id:v}}),u(e,i)};return 0===e.length&&l?(0,V.jsx)(x.az,{paddingY:2,children:(0,V.jsx)(x.y$,{accessibilityLabel:S._('Loading repin page content', ' - ', ' -- '),show:!0})}):e.length>=10?(0,V.jsx)(ti,{allBoards:e,boardsShortlist:t,closeModal:i,dismissFlyout:a,isEditingPin:o,isFromToast:d,navigate:r,onSelect:T,originalPinId:p,pin:A,pinBoardId:m,pinDescription:f,pinSectionId:y,saveToProfileEnabled:n,trackingParams:z}):(0,V.jsx)(tn,{allBoards:e,boardsShortlist:t,closeModal:i,dismissFlyout:a,isEditingPin:o,isFirstRepinExperience:s,isFromToast:d,navigate:r,onFirstBoardCreate:c,onSelect:T,originalPinId:p,pin:A,pinBoardId:m,pinDescription:f,pinSectionId:y,saveToProfileEnabled:n,titleSuggestions:w,trackingParams:z})}var tr=i(301914),to=i(853846);let tl=(void 0!==d||(d=i(249605)).hash&&"1612c2df94f42990b3d4f6ccede72a70"!==d.hash&&console.error("The definition of 'RepinCreateBoardButton_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),d);function ts({isEditingPin:e,isFirstBoardCreateActive:t,pinKey:i,pinBoardId:n,pinDescription:a,pinSectionId:r,trackingParams:o,onTouch:l,useIconWithBackground:s}){(0,g.useEffect)(()=>{(0,_.A)("RepinCreateBoardButton","/app/www/save/duplo/RepinCreateBoardButton.tsx")},[]);let d=(0,I.A)(),c=(0,k.A)(tl,i),u=(0,to.A)({href:{pathname:`/board/create/${c.entityId}/`,state:{isFirstBoardCreateActive:t,pinnedToBoardId:c.pinnedToBoard?c.pinnedToBoard.entityId:"",pinDescription:a,trackingParams:o,isEditingPin:e,pinBoardId:n,pinSectionId:r}}});return(0,V.jsx)(tr.A,{hasTopShadow:s,height:s?void 0:70,children:(0,V.jsx)(x.Rp,{onTap:({event:e})=>{l?.(),u({event:e})},children:(0,V.jsxs)(x.az,{alignItems:"center","data-test-id":"repinCreateBoardButton",display:"flex",paddingX:+!!s,paddingY:+!s,children:[s?(0,V.jsx)(x.az,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},rounding:200,children:(0,V.jsx)(x.In,{accessibilityLabel:d._('Create board button', ' - ', ' -- '),color:"default",icon:"plus",size:20})}):(0,V.jsx)(x.In,{accessibilityLabel:d._('Create board button', ' - ', ' -- '),color:"error",icon:"circle-plus",size:38}),(0,V.jsx)(x.az,{marginStart:s?2:3,children:(0,V.jsx)(x.KJ,{weight:"bold",children:d._('Create board', 'Create new board to Pin to', 'Create new board to Pin to')})})]})})})}var td=i(731102),tc=i(923520);let tu=(void 0!==c||(c=i(430592)).hash&&"f0b2fbadfba92480a2077999a000a308"!==c.hash&&console.error("The definition of 'RepinSectionPicker_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),c),tp=(e,t,i)=>({field_set_key:"detailed",id:e,preserve_component_state:t,...i?{orbac_subject_id:i}:Object.freeze({})});function th({boardId:e,navigate:t,location:{search:i},showSectionRep:n,pinKey:a,onSuccess:r,trackingParams:o,dismissFlyout:l,boardViewParameterType:s,surfaceOriginViewParameter:d}){(0,g.useEffect)(()=>{(0,_.A)("RepinSectionPicker","/app/www/save/duplo/RepinSectionPicker.tsx")},[]);let c=(0,m.wA)(),u=(0,I.A)(),p=(0,k.A)(tu,a),h=eZ(),f=new URLSearchParams(i),y=f.get("isEditingPin"),b=f.get("pinBoardId")??"",x=f.get("pinSectionId")??"",v=(0,eo.A)(o,p.trackingParams),A=(0,P.A)(),w=(0,W.Y)(),{checkExperiment:j}=(0,z.A)(),T=e=>t(e),R=(0,eM.A)(),B=(0,S.A)(),F=(0,eD.H7)(B,R),C=(0,O.Ts)(),{showRepinConfirmation:E}=(0,H.A)();(0,g.useEffect)(()=>{A({event_type:13,clientTrackingParams:v,component:13282,object_id_str:e,view_type:275,aux_data:{board_id:e,board_picker_surface_origin:d,board_title_suggestions:[],board_index:0,is_profile_save:!1,pin_id:p.entityId,board_component:s}})});let L=e=>c((0,e$.zY)(e)),K=async(i,n)=>{if(n&&A({event_type:101,clientTrackingParams:v,component:13282,element:36,object_id_str:i,view_type:91,view_parameter:3133,aux_data:{board_id:i,board_picker_surface_origin:d,board_title_suggestions:[],board_index:0,is_profile_save:!1,pin_id:p.entityId,section_id:n?.id??"",board_component:s}}),y||await void(l(),c((0,G.c)({checkExperiment:j,i18n:u,logContextEvent:A,pinId:p.entityId,boardId:e,onSuccess:y?void 0:()=>{C("Save",{pin_id:p.entityId,is_promoted:p.isPromoted}),r()},showRepinConfirmation:E,section:n,trackingParams:{clientTrackingParams:v,pinnedToBoardId:p.pinnedToBoard?p.pinnedToBoard.entityId:""},historyPush:T,savePinId:w?.save??(()=>{})})).then(()=>{n&&c((0,td.A)(n.id??""))})),y){let e=n?.id,a={board_id:i,board_section_id:e,id:p.entityId,...F?{orbac_subject_id:F}:Object.freeze({})},r=b!==i,o=x!==e;eC.A.create("PinResource",a).callUpdate().then(n=>{let l;if(r||o){let t,n,a;t={selectedPinIds:[p.entityId],source:{boardId:b,sectionId:x||null},target:{boardId:i,sectionId:e}},c((0,eG.B)(t)),L({boardId:i,sectionId:e,increment:1}),L({boardId:b,sectionId:x,increment:-1}),B.isAuth&&B.id&&!b&&(n=B.id,a=p.entityId,c((0,eY.J6)({feedId:n,feedType:eJ.A.BOARDLESS_PINS,itemIds:[a],itemType:"pin"})))}c((0,eL.O)("PinResource",{options:a})),l=p.entityId,c((0,eK.Q5)("PinResource",tp(l,!0,F))),h(p.__id),c((0,eK.O8)("PinResource",tp(n.resource_response.data.id,!1,F),n)),t(-2)})}};return(0,V.jsx)(tc.A,{boardId:e,repin:K,showSectionRep:n})}let t_=(void 0!==u||(u=i(87903)).hash&&"fbb4180ea3919f31ccfbb4bf4b2d25ea"!==u.hash&&console.error("The definition of 'MobileRepinPicker_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),u);function tg({children:e}){let t=(0,m.d4)(({session:e})=>72+((0,et.a0)(e.userAgentPlatform)?et.VG:0));return(0,V.jsx)(x.az,{dangerouslySetInlineStyle:{__style:{paddingBottom:t}},children:e})}function tm({allBoards:e,saveToProfileEnabled:t,boardsShortlist:i,isFetchingBoards:n,pinKey:a,pinDescription:r,titleSuggestions:o,trackingParams:l,warningAnchor:s,saveSessionId:d}){(0,g.useEffect)(()=>{(0,_.A)("MobileRepinPicker","/app/www/save/MobileRepinPicker.tsx")},[]);let c=(0,k.A)(t_,a),u=(0,I.A)(),p=(0,y.zy)(),h=(0,y.Zp)(),{boardId:f,pinId:b,isEditingPin:A,pinBoardId:w,pinSectionId:S,originalPinId:j,isFromToast:T}=q(),R=(0,P.A)(),B=(0,m.wA)(),F=(0,m.d4)(({experiences:e})=>e),C=F[1000112],E=F[1000153],{showToast:L,showRepinConfirmation:K}=(0,H.A)(),D=(0,ez.oW)(),N=(0,O.Ts)(),$=(0,v.Hy)(),Y=(0,W.Y)(),{checkExperiment:J}=(0,z.A)(),[U,Q]=(0,g.useState)(!1),[Z,X]=(0,g.useState)("allBoards"),[et,ec]=(0,g.useState)(void 0),[eu,ep]=(0,g.useState)(!1),eh=(0,e9.A)(),e_=()=>!!el(E,501032)||!n&&0===e.length&&!t,ey=()=>{R({view_type:21,view_parameter:87,component:7,element:f?34:75,event_type:102})},eb=r.trim(),{pinnedToBoard:ex}=c,eP=ex?(0,ee.vQ)(u._('Psst! You already saved this Pin to {{ board_name }}', 'Toast for already having repinned pin', 'Toast for already having repinned pin'),{board_name:ex.name}).join(" "):null,{dominantColor:ev}=c,eA=c.images_236x,ew=eA?eA.url:"",eS=u._('Save Pin to', 'RepinPage.Section.Header.Title', 'title for section selection in repin flow'),ek=new x.rk(2),eB=u._('Create board', 'Title for first board create', 'Title for first board create. NOTE: we are testing using "collections" in place of "boards" for new users'),eF=u._('Save to board', 'boardPicker.header', 'Title for repin page'),eC=f?eS:0!==e.length||n||t?eF:eB;return(0,V.jsxs)(en.default,{hasFixedHeader:!0,children:[(0,V.jsx)(er.A,{text:eC}),(0,V.jsx)(ei.default,{useRoundedCorners:!0,zIndex:ek,children:(0,V.jsxs)(x.so,{alignItems:"center",height:40,justifyContent:"start",children:[(0,V.jsx)(x.az,{column:2,children:(0,V.jsx)(eT.default,{alignIconLeft:!0,color:"default",icon:f?"chevron-left":"close",onTouch:ey,size:"sm"})}),(0,V.jsx)(x.az,{column:8,children:(0,V.jsx)(x.az,{"data-test-id":"repin-page-title",children:(0,V.jsx)(x._Y,{accessibilityLevel:2,align:"center",size:"300",children:(0,V.jsx)(x.KJ,{inline:!0,weight:"bold",children:eC})})})}),(0,V.jsx)(x.az,{column:2})]})}),c.images_236x&&(e_()?(0,V.jsx)(ej,{onComplete:(e,t)=>{let{boardId:i,boardUrl:n}=e,{href:a,text:r}=(0,eR.A)(n,t,u),{duration:o,text:l,thumbnail:s}=(0,em.A)({boardId:i,getReduxBoard:D,isFBC:!0,pinId:b,viewType:21});h(-1),K(({hideToast:e})=>(0,V.jsx)(ef.A,{duration:o,href:a,onHide:e,text:l||r,thumbnail:s})),C&&C.placement_id&&503459===C.experience_id&&B($(C.placement_id,C.experience_id)),E&&el(E,501032)&&B($(E.placement_id,E.experience_id)),N("Save",{pin_id:c.entityId,is_promoted:c.isPromoted})},pinDominantColor:ev??"",pinImageUrl:ew??"",savePin:e=>{let t=(0,eo.A)((p.state||{}).trackingParams),i=(0,eo.A)(l,c.trackingParams);return eh({boardCreateOptions:{name:e,initial_pin_client_tracking_params:[t],privacy:"public"},deprecatedSchemaForNormalization:eI.no}).then(e=>{let{url:t="",id:n}=e||{};return b&&B((0,G.c)({checkExperiment:J,i18n:u,logContextEvent:R,originalPinId:j,pinId:b,boardId:n,trackingParams:{clientTrackingParams:i,pinnedToBoardId:n},historyPush:e=>h(e),savePinId:Y?.save??(()=>{})})),{boardId:n,boardUrl:t}},e=>{throw{onError:()=>{h(-1),L(({hideToast:t})=>(0,V.jsx)(M.A,{duration:5e3,onHide:t,text:e.message||u._('Sorry! Something went wrong on our end.', 'error creating board', 'error creating board')}))}}})},selectedBoardName:et}):null),(0,V.jsx)(tg,{children:f?(0,V.jsx)(th,{boardId:f,boardViewParameterType:e0(Z),dismissFlyout:()=>ep(!0),location:p,navigate:h,onSuccess:()=>{h(-2)},pinKey:c,showSectionRep:!0,surfaceOriginViewParameter:153,trackingParams:l}):(0,V.jsx)(ta,{allBoards:e,boardsShortlist:i,closeModal:ey,dismissFlyout:()=>ep(!0),isEditingPin:A,isFetchingBoards:n,isFirstRepinExperience:e_(),isFromToast:T,navigate:h,onFirstBoardCreate:e=>{e_()||h(`/board/create/${c.entityId}/${e}/`,{state:{trackingParams:l,from:p.state?.from}}),ec(e)},onSelect:(e,t)=>{X(t),A?h(`/pin/${c.entityId}/repin/${e.id}/?isEditingPin=true&pinBoardId=${w}&pinSectionId=${S}`,{state:{trackingParams:l,from:p.state?.from}}):h(`/pin/${c.entityId}/repin/${e.id}/`,{state:{trackingParams:l,from:p.state?.from}})},originalPinId:j,pinBoardId:w,pinDescription:eb,pinKey:c,pinSectionId:S,saveSessionId:d,saveToProfileEnabled:t,surfaceOriginViewParameter:153})}),f?(0,V.jsx)(ea.LY,{onAddNewSection:()=>{f&&(R({view_type:91,view_parameter:3132,component:13282,element:10306,event_type:101,aux_data:{board_picker_surface_origin:153,board_title_suggestions:o||[],pin_id:c.entityId,board_component:3132,board_picker_suggested_boards:JSON.stringify(eX(i))}}),A?h(`/pin/${c.entityId}/repin/${f}/add/?isEditingPin=true&pinBoardId=${w}&pinSectionId=${S}`,{state:{from:p.state?.from}}):h(`/pin/${c.entityId}/repin/${f}/add/`,{state:{from:p.state?.from}}))},useIconWithBackground:!0}):(0,V.jsx)(ed.A,{modalHeader:(0,es.Em)(u),nextLocation:`/board/create/${c.entityId}/`,children:(0,V.jsx)(ts,{isEditingPin:A,isFirstBoardCreateActive:e_(),onTouch:()=>{R({view_type:91,view_parameter:87,component:13282,element:249,event_type:101,aux_data:{board_picker_surface_origin:153,board_title_suggestions:o||[],pin_id:c.entityId,board_component:87,board_picker_suggested_boards:JSON.stringify(eX(i))}})},pinBoardId:w,pinDescription:eb,pinKey:c,pinSectionId:S,trackingParams:l,useIconWithBackground:!0})}),eA&&el(E,501021)&&(0,V.jsx)(eg,{completeExperience:()=>{E&&el(E,501021)&&B($(E.placement_id,E.experience_id))},pinDominantColor:ev??"",pinImageHeight:eA.height??1,pinImageUrl:ew??"",pinImageWidth:eA.width??1}),s&&!eu&&c.pinnedToBoard&&!U&&eP&&(0,V.jsx)(x.AM,{anchor:s,idealDirection:"down",onDismiss:()=>Q(!0),shouldFocus:!1,children:(0,V.jsx)(x.az,{padding:3,children:(0,V.jsx)(x.KJ,{weight:"bold",children:(0,V.jsx)("span",{children:eP})})})})]})}function tf(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let ty=(void 0!==p||(p=i(265520)).hash&&"334d0ce72c30565b62e52dd00bf86623"!==p.hash&&console.error("The definition of 'RepinPage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),p),tb=(void 0!==h||(h=i(370864)).hash&&"76093586a269ca0330e25a57bd33f665"!==h.hash&&console.error("The definition of 'RepinPageQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),h);class tx extends g.PureComponent{constructor(...e){super(...e),tf(this,"state",{pinDescription:(this.props.pin.description||"").trim(),trackingParams:(this.props.location.state||{}).trackingParams||"",warningAnchor:void 0,windowInnerHeight:"undefined"!=typeof window?window.innerHeight:0,saveSessionId:(0,b.A)()}),tf(this,"onResize",()=>{this.setState({windowInnerHeight:window.innerHeight})})}componentDidMount(){let{logContextEvent:e,repinExperience:t,triggerExperimentsForPlacement:i,viewExperience:n,pin:a}=this.props,{saveSessionId:r}=this.state;e({view_type:21,event_type:13,aux_data:{board_picker_surface_origin:153,pin_id:a.entityId,save_session_id:r}}),i(1000153),t&&n(1000153,t.experience_id),window.addEventListener("resize",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}render(){let e=(0,V.jsx)(tm,{allBoards:this.props.allBoards,boardsShortlist:this.props.boardsShortlist,isFetchingBoards:this.props.isFetchingBoards,pinDescription:this.state.pinDescription,pinKey:this.props.pin,saveSessionId:this.state.saveSessionId,saveToProfileEnabled:this.props.saveToProfileEnabled,titleSuggestions:this.props.titleSuggestions,trackingParams:this.state.trackingParams,warningAnchor:this.state.warningAnchor}),t=(0,V.jsx)(X,{pinKey:this.props.pin,trackingParams:this.state.trackingParams,useRoundedCorners:!0});return(0,V.jsx)(A.Ay,{accessibilityModalLabel:this.props.i18n._('Repin page', 'RepinPage.MobileModal.AccessibilityLabel', 'Accessibility label on repin page'),closeOnOutsideClick:!1,isOpen:!0,onDismiss:()=>{},type:"repinPage",children:(0,V.jsx)(x.az,{height:this.state.windowInnerHeight-w.GV,paddingX:2,paddingY:0,children:(0,V.jsxs)(y.BV,{children:[(0,V.jsx)(y.qh,{element:t,path:"/:boardId/add"}),(0,V.jsx)(y.qh,{element:e,path:"/:boardId"}),(0,V.jsx)(y.qh,{element:e,path:"/x"}),(0,V.jsx)(y.qh,{element:e,path:"/"})]})})})}}function tP(){return(0,g.useEffect)(()=>{(0,_.A)("RepinPage","/app/www/pages/duplo/RepinPage.tsx")},[]),(0,V.jsx)(tv,{})}function tv({shouldFetchPinFromGraphQL:e}){let t,i,n;(0,g.useEffect)(()=>{(0,_.A)("RepinPage","/app/www/pages/duplo/RepinPage.tsx")},[]);let a=(0,y.Zp)(),r=(0,y.zy)(),{id:o=""}=(0,y.g)(),l=(0,I.A)(),s=(0,P.A)(),d=(0,v.Hy)(),c=(0,v.Dz)(),u=(0,E.Eo)(),{isAuth:p}=(0,S.A)(),h=(0,B.qJ)(),f=(t={field_set_key:"repin"},i=(0,j.A)({strategy:e?"GraphQL":"Legacy",query:tb,variables:{pinId:o},useGetLegacyData:({pinId:e})=>{let{data:i}=(0,R.A)({name:"PinResource",options:{...t,id:e}});return i}}),n=i?.v3GetPinQuery?.__typename==="V3GetPin"?i.v3GetPinQuery?.data:null,(0,k.A)(ty,n)),{isFetching:b,allBoards:x,boardsShortlist:A}=(e=>{let t=(0,m.d4)(e=>e.session.userId),{isFetching:i,data:n}=(0,R.A)({name:"BoardPickerBoardsResource",options:{pin_id:e,field_set_key:"profile_grid_item",shortlist_length:2,shortlist_suggestions:3,user_id:t}}),a=n?.all_boards||[];return{isFetching:i,allBoards:(0,m.d4)(e=>(0,C.A)({...e,boards:a})||[]),boardsShortlist:n?.boards_shortlist||[]}})(o),{checkExperiment:w}=(0,z.A)(),L=K(o);(0,T.A)({name:"UserResource",options:{user_id:u?.id,field_set_key:"quicksave"}});let O=(0,m.wA)(),M=(0,m.d4)(({experiences:e})=>e),{showEnabledSaveBehavior:D}=(0,F.Ay)(u?.id||"");return!p||h?(0,V.jsx)(y.C5,{replace:!0,to:`/pin/${o}/`}):f?(0,V.jsx)(tx,{allBoards:x,boardsShortlist:A,checkExperiment:w,completeExperience:(e,t)=>O(d(e,t)),i18n:l,isFetchingBoards:b,location:r,logContextEvent:s,navigate:a,pin:f,pinId:o,repinExperience:M[1000153],saveToProfileEnabled:D,titleSuggestions:L,triggerExperimentsForPlacement:e=>O((0,v.vI)(e)),viewExperience:(e,t)=>O(c(e,t))}):null}},737301(e,t,i){function n(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function a(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}i.d(t,{I4:()=>n,X2:()=>r,vb:()=>a});let r=(e,t)=>({type:"BOARD_SECTION_EDIT",payload:t})},281523(e,t,i){i.d(t,{A:()=>c});var n=i(22504),a=i(684059),r=i(972756),o=i(737301),l=i(789542),s=i(87220),d=i(197472);let c=(e,t,i,c)=>u=>{let p={board_id:e,initial_pins:t,name:i},h="BoardSectionResource";return a.A.create(h,p).callCreate().then(i=>{let a=i.resource_response.data,_=(0,n.S8)(a,s.A[h]);return c({event_type:7100,object_id_str:a.id}),u((0,r.md)(h,p,i,_)),u((0,o.I4)(e,a)),u((0,l.ZT)({feedId:e,feedType:d.A.BOARD_SECTIONS,itemIds:[a.id],itemType:"boardsection"})),t.length&&u({type:"PINS_MOVE",payload:{source:{boardId:e},target:{boardId:e,sectionId:a.id},pinIds:t}}),i})}},844962(e,t,i){i.d(t,{A:()=>a});var n=i(684059);let a=e=>t=>{t({type:"PINS_MOVE_ALL",payload:e});let{source:i,target:a,excludePinIds:r}=e,o={board_id:i.boardId,new_board_id:a.boardId,pin_ids:r,old_section_id:i.sectionId,new_section_id:a.sectionId};return n.A.create("BulkEditSelectAllResource",o).callUpdate()}},731102(e,t,i){i.d(t,{A:()=>r});var n=i(684059),a=i(737301);let r=e=>t=>n.A.create("BoardSectionResource",{section_id:e}).callGet().then(i=>{let n=i.resource_response.data||{id:"",title:""};return t((0,a.X2)(e,n)),i})},504213(e,t,i){i.d(t,{U:()=>n,o:()=>a});let n=e=>({type:"ONE_TAP_SAVE",payload:e}),a=e=>({type:"ONE_TAP_UNSAVE",payload:e})},239727(e,t,i){i.d(t,{A:()=>n});let n=(0,i(97132).createSelector)(({users:e,boards:t,session:i})=>{let n=e[i.userId]||null;return Object.keys(t).reduce((e,i)=>{let a=t[i];return!a.archived_by_me_at&&(a.owner?.id===n?.id||a.collaborating_users&&a.collaborating_users.map(({id:e})=>e).includes(n?.id))&&a.cover_images?e.concat([a]):e},[])},e=>e.sort((e,t)=>e?.name?.localeCompare(t?.name??"")??0))},471990(e,t,i){i.r(t),i.d(t,{default:()=>b});var n=i(97407),a=i(296540),r=i(671468),o=i(278106),l=i(328138),s=i(960926),d=i(275552),c=i(869344),u=i(28245),p=i(643357),h=i(104735),_=i(441472),g=i(182835),m=i(570305),f=i(568677),y=i(474848);function b({alignIconLeft:e,bgColor:t,color:i,disableRedirect:b=!1,fallbackUrl:x,icon:P="chevron-left",onTouch:v,padding:A,placement:w,shouldUseFallbackUrl:S,size:k="lg",viewParameter:j,viewType:I,isVisualSearch:z}){(0,a.useEffect)(()=>{(0,n.A)("BackButton","/app/www/routing/BackButton.tsx")},[]);let T=(0,p.A)(),R=(0,o.Zp)(),B=(0,o.zy)(),F=(0,f.qJ)(),C=(0,r.d4)(e=>e.session.isAuthenticated),E=(0,d.A)(),L=(0,m.A)(),K=(0,u.D2)(),{viewType:O,viewParameter:M}=(0,c.WQ)(),[D,N]=I?[I,j]:[O,M],H=()=>{let e=(0,_.y1)().getItem(s.rt);B.key||"/ideas"!==x?(0,g.PM)(`pinner_conversion.back_button.${String(e?.[0].pageType)}`):(0,g.PM)("pinner_conversion.back_button.no_history"),(0,g.PM)(`web_back_button_click.${String(w)}.is_auth_${String(C)}`),L({action:"click",item:"back-button"}),D&&E({view_type:D,view_parameter:N,element:34,event_type:102}),v&&v(),b||((!B.key||B.state&&"redirect"===B.state.referrer||S)&&x?R(x):B.pathname.includes("/password/reset/")&&B.search&&B.search.includes("?nativeShouldDismiss=true")?R("/login/?dismissWebview=true"):R(-1))},$=K?u.fO:"white",Y=(0,h.isBoardPage)(B)||z||"inverse"===i;return(0,y.jsx)(l.az,{"data-test-id":"back-button",children:e?(0,y.jsx)(l.az,{alignItems:"center",display:"flex",height:48,marginStart:"close"===P?-1:-2,width:48,children:(0,y.jsx)(l.K0,{accessibilityLabel:T._('Back', 'navigation button', 'navigation button'),bgColor:t,icon:P,iconColor:!i&&(!t||["white","lightGray","transparent"].includes(t))?"subtle":i,onClick:H,padding:"auto"!==A?A:2,size:k})}):(0,y.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{backgroundColor:F||Y||t?"":$,width:K&&!Y?"fit-content":""}},rounding:"circle",children:(0,y.jsx)(l.K0,{accessibilityLabel:T._('Back', 'navigation button', 'navigation button'),bgColor:t||F?t:"transparent",icon:P,iconColor:!i&&(!t||["white","lightGray","transparent"].includes(t))?"subtle":i,onClick:H,padding:"auto"!==A?A:2,size:k})})})}},175627(e,t,i){i.d(t,{A:()=>p});var n=i(97407),a=i(296540),r=i(671468),o=i(328138),l=i(643357),s=i(327467),d=i(431210),c=i(774921),u=i(474848);function p({boardId:e,onBoardSelected:t,noArrowIcon:i,showSingleBoardRep:p}){(0,a.useEffect)(()=>{(0,n.A)("BoardPickerRow","/app/www/save/duplo/BoardPickerRow.tsx")},[]);let h=(0,l.A)(),_=(0,r.d4)(({boards:e})=>e)[e],g=_?.section_count,m=!!g&&g>0,f=(0,d.A)(),y=_?.name??"this board";return(0,u.jsx)(o.Rp,{accessibilityLabel:(0,s.$)(`${h._('Select {{ boardName }}', 'board.picker.row.select.board', 'Accessibility label for select board button')}`,{boardName:y}),onTap:f({fn:()=>t(m)}),rounding:200,tapStyle:"compress",children:(0,u.jsx)(c.A,{boardId:e,noArrowIcon:i,showSingleBoardRep:p})})}},774921(e,t,i){i.d(t,{A:()=>h});var n=i(97407),a=i(296540),r=i(671468),o=i(328138),l=i(194637),s=i(643357),d=i(327467),c=i(409848),u=i(682048),p=i(474848);function h({boardId:e,navigateToBoard:t,noArrowIcon:i,showCollaborators:h,showSingleBoardRep:_,shouldShowPinAndSectionCount:g}){(0,a.useEffect)(()=>{(0,n.A)("BoardRow","/app/www/save/duplo/BoardRow.tsx")},[]);let m=(0,s.A)(),f=(0,r.d4)(({boards:e})=>e)[e];if(!f)return null;let y=(f.collaborating_users||[]).map(e=>({name:e.username??"",src:"https://s.pinimg.com/images/user/default_75.png"===e.image_medium_url?"":e.image_medium_url??""})),b=new o.rk(0),x=f.pin_count,P=f.section_count,v=(0,p.jsx)(a.Fragment,{children:(0,p.jsx)(o.az,{"data-test-id":P?"boardWithSection":"boardWithoutSection",children:(0,p.jsxs)(o.az,{alignItems:"center",column:12,"data-test-id":"board-picker-row",display:"flex",marginBottom:4*!!_,rounding:200,children:[(0,p.jsx)(o.az,{paddingY:2*!_,children:_?(0,p.jsx)(o.az,{height:48,overflow:"hidden",width:48,children:(0,p.jsx)(o.n1,{height:"100%",rounding:200,width:"100%",children:(0,p.jsx)(o._V,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:f.image_cover_url||" "})})}):(0,p.jsx)(o.az,{height:60,overflow:"hidden",rounding:400,width:60,children:(0,p.jsx)(u.default,{boardKey:{type:"Legacy",data:f},fullSize:!0,hideSecretBoardIcon:!0,type:"thumbnail",viewType:void 0})})}),(0,p.jsxs)(o.so,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,p.jsxs)(o.az,{direction:"column",display:"flex",justifyContent:"center",marginStart:_?2:4,overflow:_?"hidden":"auto",width:"100%",children:[(0,p.jsx)(o.KJ,{lineClamp:_?1:void 0,size:"400",weight:"bold",children:f.name}),g&&(0,p.jsxs)(o.so,{children:[(0,p.jsx)(o.KJ,{inline:!0,children:!!x&&(0,d.vQ)(m.ngettext('{{ PinCount }} Pin', '{{ PinCount }} Pins', x ?? 0, 'BoardRow.pinCount', 'Number of Pins on board or section, pinCount: number of Pins'),{PinCount:x})}),!!x&&!!P&&(0,p.jsx)(c.A,{}),(0,p.jsx)(o.KJ,{inline:!0,children:!!P&&(0,d.vQ)(m.ngettext('{{ sectionCount }} section', '{{ sectionCount }} sections', P ?? 0, 'BoardRow.sectionCount', 'Number of sections on board, sectionCount: number of sections'),{sectionCount:P})})]})]}),(0,p.jsxs)(o.so,{alignItems:_?"center":"start",justifyContent:"start",children:["secret"===f.privacy&&(0,p.jsx)(o.az,{marginStart:_?3:1,children:(0,p.jsx)(o.In,{accessibilityLabel:m._('secret board icon', ' - ', ' -- '),color:_?"default":"subtle",icon:"lock"})}),f.is_collaborative&&(_||h)&&y.length>0?(0,p.jsx)(o.az,{zIndex:b,children:(0,p.jsx)(l.Z7,{collaborators:y,size:1===y.length?"sm":"xs"})}):f.is_collaborative&&(0,p.jsx)(o.az,{marginStart:1,children:(0,p.jsx)(o.In,{accessibilityLabel:m._('group board icon', ' - ', ' -- '),icon:"people"})}),!i&&!!f.section_count&&(0,p.jsx)(o.az,{"data-test-id":"boardSectionPicker",marginStart:3*!!_,children:(0,p.jsx)(o.In,{accessibilityLabel:m._('board section board picker icon', ' - ', ' -- '),color:_?"default":"subtle",icon:"chevron-right"})})]})]})]})})});return t&&f.url?(0,p.jsx)(o.$A,{href:f.url,rounding:200,tapStyle:"compress",children:v}):v}},923520(e,t,i){i.d(t,{A:()=>m});var n=i(97407),a=i(296540),r=i(671468),o=i(278106),l=i(328138),s=i(643357),d=i(166919),c=i(796903),u=i(175627),p=i(327467),h=i(818663),_=i(474848);function g({onSectionSelected:e,sectionId:t,showSectionRep:i}){(0,a.useEffect)(()=>{(0,n.A)("SectionPickerRow","/app/www/save/duplo/SectionPickerRow.tsx")},[]);let o=(0,r.d4)(({boardsections:e})=>e[t]),d=(0,s.A)(),c=o&&o.preview_pins?.[0]&&o.preview_pins[0].image_medium_url,u=o?.title??"";return(0,_.jsx)(h.A,{onTouch:e,pressState:"none",rounding:200,children:(0,_.jsxs)(l.az,{alignItems:"center",column:12,"data-test-id":"sectionPickerRow",display:"flex",marginBottom:4*!!i,rounding:200,children:[i&&(0,_.jsx)(l.az,{height:48,width:51,children:(0,_.jsx)(l.n1,{height:"100%",rounding:200,width:"100%",children:c&&(0,_.jsx)(l._V,{alt:(0,p.$)(d._('{{ boardSectionName }} thumbnail', 'SectionPickerRow.boardImage.accessibilityLabel.text', 'Additional text explaining board image thumbnail. boardSectionName:Title of the board section for a11y text'),{boardSectionName:u}),color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:c})})}),!i&&(0,_.jsx)(l.az,{column:1,paddingY:2}),(0,_.jsx)(l.az,{column:11,display:"flex",flex:"grow",justifyContent:"between",paddingY:2,children:i?(0,_.jsx)(l.az,{marginStart:2,overflow:"hidden",width:"100%",children:(0,_.jsx)(l.KJ,{lineClamp:1,size:"400",weight:"bold",children:o?.title})}):(0,_.jsx)(l.az,{marginStart:2,children:(0,_.jsx)(l.KJ,{weight:"bold",children:o?.title})})})]})})}function m({boardId:e,originalBoardId:t,sectionId:i,repin:p,hideBoardPickerRow:h,showSectionRep:m}){(0,a.useEffect)(()=>{(0,n.A)("SectionPickerList","/app/www/save/duplo/SectionPickerList.tsx")},[]);let f=(0,s.A)(),{isFetching:y,boardSections:b,filteredBoardSections:x}=((e,t)=>{let{isFetching:i}=(0,d.A)({name:"BoardSectionsRepinResource",options:{board_id:e}}),n=(0,r.d4)(({feeds:t})=>(t[`board-sections:${e}`]||[]).reduce((e,t)=>{if("boardsection"===t.type){let i={type:"boardsection",id:t.id};e.push(i)}return e},[])),a=(0,r.d4)(i=>n.map(e=>e.id).reduce((n,a)=>{let r=i.boardsections[a??""];return a!==t&&r&&n.push({board:{id:e},id:r.id,title:r.title,type:"boardsection",slug:r.slug}),n},[]));return{isFetching:i,boardSections:n,filteredBoardSections:a}})(e,i),P=(0,o.Zp)(),v=(0,c.oW)()(t||"");return(0,_.jsxs)(l.az,{children:[b.length>0&&(0,_.jsxs)(l.az,{paddingY:3*!m,children:[m&&(0,_.jsx)(l.az,{paddingY:2,children:(0,_.jsx)(l.az,{marginBottom:2,children:(0,_.jsx)(l._Y,{accessibilityLevel:3,size:"300",children:(0,_.jsx)(l.KJ,{inline:!0,children:f._('Board', 'RepinFlow.SectionPickerList.Board', 'Section picker board title')})})})}),!h&&(0,_.jsx)(u.A,{boardId:e,noArrowIcon:!0,onBoardSelected:()=>p(e,void 0,f),showSingleBoardRep:m},e),m&&(0,_.jsx)(l.az,{paddingY:4,children:(0,_.jsx)(l._Y,{accessibilityLevel:3,size:"300",children:(0,_.jsx)(l.KJ,{inline:!0,children:f._('Section', 'RepinFlow.SectionPickerList.Section', 'Section picker all sections title')})})}),x.map(i=>(0,_.jsx)(g,{onSectionSelected:()=>{p(e,i,f),t&&P(v?.url??"")},sectionId:i.id??"",showSectionRep:m},i.id))]}),(0,_.jsx)(l.y$,{accessibilityLabel:f._('Loading board section for repin flow', ' - ', ' -- '),show:y})]})}},227957(e,t,i){i.d(t,{A:()=>a});var n=i(972756);function a({dispatch:e,viewerUser:t}){let{id:i}=t||{};i&&e((0,n.Q5)("BoardlessPinsResource",{field_set_key:"mobile",userId:i}))}},240385(e,t,i){i.d(t,{A:()=>a});var n=i(685226);function a(e){return{defaultStyle:0,fontFamily:e.name??"",fontGroup:n.YV,fontOverrides:{letterSpacing:e.letter_spacing,lineHeight:e.line_height},format:"truetype",id:e.id,styles:[{fontStyle:"",fontUrl:e.url,fontWeight:"normal",name:"normal"}]}}},100377(e,t,i){i.d(t,{A:()=>y});var n,a=i(97407),r=i(296540),o=i(278106),l=i(534955),s=i(568677);i(234784);var d=i(993932),c=i(264661),u=i(698781),p=i(598659),h=i(474848);let _=(void 0!==n||(n=i(368213)).hash&&"60ba8f292ef82335c3d4cbce50f362d8"!==n.hash&&console.error("The definition of 'CloseupRepinPage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function g({pinKey:e}){(0,r.useEffect)(()=>{(0,a.A)("CloseupRepinPage","/app/www/pages/authDesktop/CloseupRepinPage.tsx")},[]);let t=(0,u.A)(_,e);return t?(0,h.jsx)(p.A,{type:"authDesktop",children:t.isEligibleForPdp?(0,h.jsx)(c.A,{showRepin:!0}):(0,h.jsx)(d.Ay,{showRepin:!0})}):null}var m=i(494324),f=i(925177);let y=function(){(0,r.useEffect)(()=>{(0,a.A)("InternalRepinPage","/app/www/pages/InternalRepinPage.tsx")},[]);let{id:e}=(0,o.g)(),t=(0,s.Ay)(),{isAuthenticated:i}=(0,l._8)(),n=(0,f.HR)(),d=e?n(e):null;return i?"desktop"===t?(0,h.jsx)(g,{pinKey:null!=d?{type:"Legacy",data:d}:null}):(0,h.jsx)(m.Ay,{shouldFetchPinFromGraphQL:!0}):(0,h.jsx)(o.C5,{replace:!0,to:`/pin/${e??""}/`})}},617732(e,t,i){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||[]).push(["www/pin/[id]/repin",function(){return i(100377).A}])}},function(e){e.O(0,["10278","18440","24330","26660","32964","40285","47970","50683","51886","51902","5731","58147","63435","63712","6619","72188","76803","78180","83805","85680","90267","91796","94395","9448","95280","9615","97361","99696"],function(){return e(e.s=617732)}),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/repin-f9dd9d71ac94fc58.mjs.map